"use strict";if(($(".main-body .page-wrapper").find("#supplier-edit-container").length||$(".main-body .page-wrapper").find("#supplier-add-container").length)&&(jQuery.validator.addMethod("regxPhone",function(e,t){var a=new RegExp(/^((\+\d{1,4}(-| )?\(?\d\)?(-| )?\d{1,9})|(\(?\d{2,9}\)?))(-| )?(\d{3,4})(-| )?(\d{4})(( x| ext)\d{1,5}){0,1}$/),i=new RegExp(/^[+0-9 () \-]{8,20}$/);return this.optional(t)||a.test(e)||i.test(e)},jsLang("Enter a valid phone number")),jQuery.validator.addMethod("regxEmailValidation",function(e,t){return this.optional(t)||validateEmail(e)},jsLang("Enter a valid email"))),$(".main-body .page-wrapper").find("#supplier-add-container").length&&($(".js_select2").select2(),$(".error").hide(),$("#addSupplier").validate({rules:{supp_name:{required:!0,maxlength:30},email:{remote:SITE_URL+"/email-valid-supplier",regxEmailValidation:!0},currency_id:{required:!0},contact:{required:!1,regxPhone:!0}}}),$("#submitBtn").on("click",function(){var e=$("#currency_id").val();1==$("#addSupplier").valid()&&""!=e&&($(".spinner").show().css("line-height","0"),$("#spinnerText").text(jsLang("Please wait...")),$("#submitBtn").attr("disabled",!0),$("form#addSupplier").trigger("submit"))}),$("#currency_id").on("change",function(){""==$(this).val()?$("#currency_id-error").show():$("#currency_id-error").hide()})),$(".main-body .page-wrapper").find("#supplier-edit-container").length&&($(".js_select2").select2(),$(document).on("change","#currency_id",function(){""==$("#currency_id :selected").val()?$("#currency_id-error").show():$("#currency_id-error").hide()}),$("#editSupplier").validate({rules:{supp_name:{required:!0,maxlength:30},email:{remote:{url:SITE_URL+"/email-valid-supplier",type:"GET",data:{supplierId:function(){return $("input[name=supplier_id]").val()}}},regxEmailValidation:!0},currency_id:{required:!0},contact:{required:!1,regxPhone:!0}}}),$("#submitBtn").on("click",function(){""==$("#currency_id :selected").val()?event.preventDefault():1==$("form#editSupplier").valid()&&($("#submitBtn").attr("disabled","disabled"),$("form#editSupplier").trigger("submit"))})),$(".main-body .page-wrapper").find("#supplier-import-container").length&&($("#myform1").validate({rules:{csv_file:{required:!0}}}),$("#myform1").on("submit",function(e){var t=0;$(".valdation_check").each(function(){var e=$(this).attr("id");""==$("#"+e).val()&&($("#val_"+e).html(jsLang("This field is required.")),t=1)}),$(".valdation_select").each(function(){var e=$(this).attr("id");""==$("#"+e).val()&&($("#val_"+e).html(jsLang("This field is required.")),t=1)}),1==t&&e.preventDefault()}),$(".valdation_check").on("keypress keyup",function(){var e=$(this).attr("id");$("#val_"+e).html("")}),$(".valdation_select").on("click",function(){var e=$(this).attr("id");$("#val_"+e).html("")}),$("#fileRequest").on("click",function(){window.location=SITE_URL+"/public/dist/downloads/supplier_sheet.csv"}),$(".error, #note_txt_2").hide(),$("#validatedCustomFile").on("change",function(){for(var e=[],t=0;t<$(this)[0].files.length;t++)e.push($(this)[0].files[t].name);$(this).next(".custom-file-label").html(e.join(", "));var a=e.toString().split(".").pop();-1==$.inArray(a,["csv"])?($("#note_txt_1").hide(),$("#note_txt_2").show(),$("#note_txt_2").html('<h6> <span class="text-danger font-weight-bolder">'+jsLang("Invalid file Extension.")+'</span> </h6> <span class="badge badge-info note-style">'+jsLang("Note")+'</span><small class="text-info">'+jsLang("Allowed File Extensions: csv")),$("#submit").attr("disabled","disabled")):($("#submit").removeAttr("disabled"),$("#note_txt_1, #note_txt_2").hide())})),($(".main-body .page-wrapper").find("#supplier-ledger-container").length||$(".main-body .page-wrapper").find("#supplier-order-container").length)&&$(document).on("click","#tablereload",function(e){e.preventDefault(),$("#dataTableBuilder").DataTable().ajax.reload()}),$(".main-body .page-wrapper").find("#supplier-ledger-container").length){var p=$("#total_purchase_amount").val(),q=$("#paid_amount").val(),r=$("#balance_amount").val();$("#total_purchase_amount1").html(p),$("#paid_amount1").html(q),$("#balance_amount1").html(r),$("#ledger").DataTable({order:[],language:{url:app_locale_url},pageLength:row_per_page}),$("#daterange-btn").daterangepicker(daterangeConfig(startDate,endDate),cbRange),cbRange(startDate,endDate),$(document).on("click","#csv, #pdf",function(e){e.preventDefault(),window.location=SITE_URL+"/supplier/ledger-report-"+this.id+"?to="+$("#endto").val()+"&from="+$("#startfrom").val()+"&supplier="+supplier+"&supplier_id="+supplier_id})}$(".main-body .page-wrapper").find("#supplier-order-container").length&&($("#daterange-btn").daterangepicker(daterangeConfig(startDate,endDate),cbRange),cbRange(startDate,endDate),$("#confirmDelete").on("show.bs.modal",function(e){var t=$(e.relatedTarget),a=$(this);$("#confirmDeleteSubmitBtn").attr("data-task","").removeClass("delete-task-btn"),"Delete"==t.data("label")&&(a.find("#confirmDeleteSubmitBtn").addClass("custom-btn-small btn-danger").attr("data-task",t.data("id")).text(jsLang("Delete")).show(),a.find("#confirmDeleteLabel").text(t.data("title")),a.find(".modal-body").text(t.data("message"))),$("#confirmDeleteSubmitBtn").on("click",function(){$("#delete-purchase-"+$(this).data("task")).trigger("submit")})}),$(document).on("click","#csv, #pdf",function(e){e.preventDefault(),window.location=SITE_URL+"/supplier/purchase-report-"+this.id+"?to="+$("#endto").val()+"&from="+$("#startfrom").val()+"&supplier="+supplier+"&supplier_id="+supplier_id})),$(".main-body .page-wrapper").find("#supplier-payment-container").length&&($("#daterange-btn").daterangepicker(daterangeConfig(startDate,endDate),cbRange),cbRange(startDate,endDate),$("#confirmDelete").on("show.bs.modal",function(e){var t=$(e.relatedTarget),a=$(this);$("#confirmDeleteSubmitBtn").attr("data-task","").removeClass("delete-task-btn"),"Delete"==t.data("label")&&(a.find("#confirmDeleteSubmitBtn").addClass("delete-task-btn").attr("data-task",t.data("id")).text(jsLang("Delete")).show(),a.find("#confirmDeleteLabel").text(t.data("title")),a.find(".modal-body").text(t.data("message"))),$("#confirmDeleteSubmitBtn").on("click",function(){$("#delete-purchaseOrderPayment-"+$(this).data("task")).trigger("submit")})}),$(document).on("click","#csv, #pdf",function(e){e.preventDefault(),window.location=SITE_URL+"/supplier/payment-"+this.id+"?to="+$("#endto").val()+"&from="+$("#startfrom").val()+"&supplier_id="+supplier_id})),$(".main-body .page-wrapper").find("#supplier-list-container").length&&($("#dataTableBuilder").on("change",".status",function(){var e=$(this).attr("data-supplier_id"),t=$(this).is(":checked")?1:0,a=SITE_URL+"/supplier/change-status";$.ajax({url:a,method:"POST",data:{id:e,status:t,_token:token},dataType:"json",success:function(e){"success"==e.status&&($("#supplierCount").html(e.supplierCount),$("#supplierActive").html(e.supplierActive),$("#supplierInActive").html(e.supplierInActive))}})}),$(document).on("click","#pdf, #csv",function(e){window.location=SITE_URL+"/supplier_list_"+this.id}),$("#dataTableBuilder").addClass("supplier-list-styles"));
"use strict";if($(".main-body .page-wrapper").find("#barcode-container").length){$(document).ready(function(){$("#printBtn").on("click",function(){var t={mode:"iframe",popClose:!1};$("div.barcode").printArea(t)})}),$(".select").select2();var stack=[],token=$("#token").val();function in_array(t,e){for(var n=0;n<e.length;n++)if(e[n]==t)return!0;return!1}$("#search").autocomplete({source:function(t,e){$.ajax({url:SITE_URL+"/barcode/search",dataType:"json",type:"POST",data:{_token:token,search:t.term},success:function(t){if(1==t.status_no){$("#val_item").html();t=t.items;$("#no_div").css("display","none"),e($.map(t,function(t){return{id:t.id,value:t.description,stock_id:t.stock_id}}).slice(0,10))}else $(".ui-menu-item").remove(),$("#no_div").css("display","block")}})},select:function(t,e){var n=e.item;if(n.id){if(in_array(n.id,stack))$("#quantity_"+n.id).val(function(t,e){return++e});else{stack.push(n.id);var i='<tr id="rowid'+n.id+'"><td class="text-center">'+n.value+' <input type="hidden" name="id[]" value="'+n.id+'"><input type="hidden" name="name[]" value="'+n.value+'"><input type="hidden" name="stock_id[]" value="'+n.stock_id+'"></td><td><input class="form-control text-center no_units m-b-10 positive-int-number quantity" min="0" name="quantity[]" value="1" id="quantity_'+n.id+'"></td><td class="text-center"><span id="'+n.id+'" class="text-center btn btn-xs btn-danger delete_item"><i class="feather icon-trash-2"></i></span></td>';$(i).insertAfter($("table tr.dynamicRows")),$(".tableInfo").show()}return $(this).val(""),$("#val_item").html(""),!1}},minLength:1,autoFocus:!0}),$(document).on("click",".delete_item",function(t){for(var e=$(this).attr("id"),n=0;n<stack.length;n++)stack[n]==e&&stack.splice(n,1)}),$("#btnSubmit").on("click",function(t){stack&&0==stack.length&&($("#alert").fadeTo(1e4,500).slideUp(500,function(){$("#alert").slideUp(500)}),t.preventDefault()),$(".quantity").each(function(){$(this).val()<=0&&($("#quantity-alert").fadeTo(1e4,500).slideUp(500,function(){$("#quantity-alert").slideUp(500)}),t.preventDefault())})}),$(document).on("click",".delete_item",function(t){$(this).parent().parent().remove()})}
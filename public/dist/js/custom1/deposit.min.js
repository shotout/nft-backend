"use strict";if($(".select2").select2(),$("#deposit-add-container input,#deposit-edit-container input").on("keyup",function(){$(this).valid()}),$(".main-body .page-wrapper").find("#deposit-add-container").length){function numberRound(e){return parseFloat(e).toFixed(2)}$("#deposit-add-container #trans_date").daterangepicker(dateSingleConfig()),$("#deposit-add-container #deposit").validate({rules:{account_no:{required:!0},trans_date:{required:!0},amount:{required:!0},category_id:{required:!0},payment_method:{required:!0},attachment:{fileType:"jpg|png|gif|doc|docx|pdf",remote:function(e){if(0!=e.files.length)return{url:SITE_URL+"/is-valid-file-size",data:{filesize:e.files[0].size}}}}}}),$("#validatedCustomFile").on("change",function(e){for(var t=[],n=0;n<$(this)[0].files.length;n++)t.push($(this)[0].files[n].name);$(this).next(".custom-file-label").html(t.join(", "));var a=this.files[0].type;$.inArray(a,["image/gif","image/jpg","image/jpeg","image/png","image/bmp","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"])<0?($("#divNote").show(),$("#note_txt_1").hide(),$("#note_txt_2").html('<h6> <span class="text-danger font-weight-bolder"> '+jsLang("Invalid file extension")+' </span> </h6> <span class="badge badge-danger">'+jsLang("Note")+"!</span> "+jsLang("Allowed File Extensions: jpg, png, gif, bmp")),$("#note_txt_2").show(),$("#prvw").hide(),$("#btnSubmit").attr("disabled",!0)):($("#btnSubmit").removeAttr("disabled"),$("#prvw").show(),$("#divNote, #note_txt_2, #note_txt_1").hide())}),$("#deposit-add-container #account_no").on("change",function(){let e=$(this).val(),t=$("option:selected",this).attr("currency-code"),n=$("option:selected",this).attr("currency-id"),a=$("#trans_date").val();if(""==e||""==n)$('label[for="account_no"]').css("display","block"),$(".message").removeClass("text-success").html("");else{var i=SITE_URL+"/get/balance";$.ajax({url:i,method:"POST",data:{account_no:e,date:a,_token:token},dataType:"json",success:function(e){1==e.status&&($('label[for="account_no"]').css("display","none"),$(".message").removeClass("text-danger").addClass("text-success").html("<strong>"+jsLang("Current Balance")+": "+getDecimalNumberFormat(e.balance)+" "+t+"</strong>"),$("#currency_id").val(n))}})}}),$(document).ready(function(){})}$(".main-body .page-wrapper").find("#deposit-edit-container").length&&($(document).ready(function(){$("#deposit-edit-container #deposit").validate({rules:{transaction_date:{required:!0},amount:{required:!0},category_id:{required:!0},payment_method:{required:!0},attachment:{fileType:"jpg|png|gif|doc|docx|pdf",remote:function(e){if(0!=e.files.length)return{url:SITE_URL+"/is-valid-file-size",data:{filesize:e.files[0].size}}}}}})}),$(document).ready(function(){}),$(document).on("click","#deposit-edit-container .attachment-delete",function(){swal({title:jsLang("Are you sure?"),text:jsLang("Once deleted, you will not be able to recover this file."),icon:"warning",buttons:[jsLang("Cancel"),jsLang("Ok")],dangerMode:!0}).then(e=>{if(e){var t=$(this),n=(t.parent(),$(".attachment").parent()),a=$(".attachment-delete").parent();$.ajax({type:"POST",url:SITE_URL+"/deposit/file/delete",data:{id:t.attr("data-depositId"),filePath:"public/uploads/deposit",_token:token},dataType:"json",success:function(e){1==e.status?(n.remove(),a.remove(),swal(jsLang("Success! Your file has been deleted."),{icon:"success"})):swal(jsLang("Something went wrong, please try again."),{icon:"error",buttons:[!1,jsLang("Ok")]})}})}})})),$(".main-body .page-wrapper").find(".list-container").length&&($(function(){$(document).on("click",".list-container #csv, .list-container #pdf",function(e){e.preventDefault(),window.location=SITE_URL+"/bank_account/deposit_"+this.id+"?to="+$("#endto").val()+"&from="+$("#startfrom").val()+"&account_no="+$(".list-container #account_no").val()}),$("body").tooltip({selector:'[data-toggle="tooltip"]'})}),$(".list-container #dataTableBuilder").addClass("deposit-list"));

"use strict";$(".iCheck-helper, .view-check").on("click",function(){$("#form").trigger("submit")});var pk=new Piklor(".color-picker",["#1abc9c","#2ecc71","#3498db","#9b59b6","#34495e","#16a085","#27ae60","#2980b9","#8e44ad","#2c3e50","#f1c40f","#e67e22","#e74c3c","#95a5a6","#f39c12","#d35400","#c0392b","#7f8c8d"],{open:".picker-wrapper .btn"}),colorInput=pk.getElm("#eventColor"),showColor=pk.getElm("#showColor");pk.colorChosen(function(e){colorInput.value=e,showColor.style.backgroundColor=e}),$("#eventForm").validate({rules:{title:{required:!0},description:{required:!1},start_date:{required:!0},end_date:{endDateGreaterThanStartDate:!0}}}),$.validator.addMethod("endDateGreaterThanStartDate",function(e,t){var a=$("#startDate").val(),n=$("#endDate").val();return!(Date.parse(a)>Date.parse(n))},jsLang("The end date cannot be before the start date.")),$("#addEventModal").on("show.bs.modal",function(e){$("#eventForm").validate().resetForm(),$("input").removeClass("error"),$(this).find("textarea[name=description]").val("")}),$(document).on("change","#startDate, #endDate",function(){var e=$("#startDate").val(),t=$("#endDate").val();Date.parse(e)>Date.parse(t)&&$("#end_date-error").html(jsLang("The end date cannot be before the start date.")).css("display","block")}),document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("calendar");new FullCalendar.Calendar(e,{initialView:"dayGridMonth",selectable:!0,initialDate:initialDate,headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},events:JSON.parse(calendarEvents),dayMaxEventRows:!0,dateClick:function(e){$("#addEventModal").modal("show"),$("#startDate").daterangepicker(dateSingleConfig(e.dateStr)),$("#endDate").daterangepicker(dateSingleConfig(e.dateStr)),$("#evtTitle").val(""),$("#evtDes").val(""),$("#end_date-error").html(""),$("#endDate").val(""),$("#eventColor").val(""),$("#showColor").css("background-color",""),$("#gridSystemModalLabel").html(jsLang("Add Event")),$("#delete").css("display","none")},eventClick:function(e){var t=e.event;6==t.groupId&&($("#addEventModal").modal("show"),$("#gridSystemModalLabel").html(jsLang("Edit Event")),$("#evtTitle").val(t.title),$("#evtDes").val(t.extendedProps.description.replace("\\r\\n","\r\n")),$("#startDate").daterangepicker(dateSingleConfig(t.start)),null==t.end?($("#endDate").daterangepicker({autoUpdateInput:!1,singleDatePicker:!0}),$("#endDate").on("apply.daterangepicker",function(e,t){$(this).val(t.endDate.format(dateFormatForMoment))})):$("#endDate").daterangepicker(dateSingleConfig(t.end)),$("#eventColor").val(t.backgroundColor),$("#showColor").css("background-color",t.backgroundColor),$("#eventId").val(t.id),$("#delete").css("display","block"))}}).render()}),$(document).on("click","#delete",function(){swal({title:jsLang("Are you sure?"),text:jsLang("Once deleted, you will not be able to recover this event."),icon:"warning",buttons:[jsLang("Cancel"),jsLang("Ok")],dangerMode:!0}).then(e=>{if(e){var t=$("#eventId").val();$(this).parent(),$(".attachment").parent(),$(".attachment-delete").parent();$.ajax({type:"POST",url:SITE_URL+"/calendar/event-delete",data:{id:t,_token:token},dataType:"json",success:function(e){1==e.status?(swal(jsLang("Success! Event has been deleted."),{icon:"success",buttons:[!1,jsLang("Ok")]}),location.reload()):swal(jsLang("Oops! Something went wrong, please try again."),{icon:"error",buttons:[!1,jsLang("Ok")]})}})}})});
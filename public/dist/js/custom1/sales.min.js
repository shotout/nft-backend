"use strict";let global_exchangeRate;function checkIsAvailable(e){let t=!0;return $(".inputQty").each(function(n,i){var a=$(this).val(),r=$(this).attr("data-max");if("invoice"==e&&0==parseFloat(validateNumbers(a)))return swal(jsLang("Quantity can not be zero"),{icon:"error",buttons:[!1,jsLang("Ok")]}),$(this).addClass("error"),t=!1,!1;1==$(this).attr("data-is_stock_managed")&&parseFloat(r)<parseFloat(validateNumbers(a))&&(swal(r+jsLang(" item(s) available in stock"),{icon:"error",buttons:[!1,jsLang("Ok")]}),$(this).addClass("error"),t=!1)}),t}function copyAddress(){$("#copy").on("click",function(){$("#ship_street").val($("#bill_street").val()),$("#ship_city").val($("#bill_city").val()),$("#ship_state").val($("#bill_state").val()),$("#ship_zipCode").val($("#bill_zipCode").val());var e=$("#bill_country_id").val();$("#ship_country_id").val(e).trigger("change")})}function preQuantity(){let e=0;$(document).on("keydown",".inputQty",function(t){e=$(this).val()})}function smsModal(e){$("#smsOrder").on("hidden.bs.modal",function(t){$("#sendOrderInfoSMS").validate().resetForm(),$("#phoneno").val(e),$("#phoneno").removeClass("error")})}function showAvailableItem(e,t){var n;return n=1==t.is_stock_managed?getDecimalNumberFormat(t.available):"-",$("<li>").append("<div>"+t.value+"<br>Available: "+n+"</div>").appendTo(e)}function showAvavilableStock(){$(document).on("keyup",".inputQty",function(e){var t=$(this).val(),n=$(this).attr("data-max");1==$(this).attr("data-is_stock_managed")&&parseFloat(n)<parseFloat(validateNumbers(t))&&(swal(n+jsLang(" item(s) available in stock"),{icon:"error",buttons:[!1,jsLang("Ok")]}),$(this).val(preQuantity))})}function statusChangePayment(){$(document).on("click",".status",function(){var e=$(this).attr("data-id"),t=$(this).data("trans_id"),n=JSON.stringify(t),i=SITE_URL+"/payment/customer_payment/verification";$.ajax({url:i,method:"POST",data:{status:e,customer_transaction_id:n,_token:token},dataType:"json",success:function(e){1==e.status?location.reload():swal(jsLang("Something went wrong, please try again."),{icon:"error",buttons:[!1,jsLang("Ok")]})}})})}if(($(".main-body .page-wrapper").find("#sales-quotation-view-details-container").length||$(".main-body .page-wrapper").find("#sales-invoice-view-details-container").length||$(".main-body .page-wrapper").find("#purchase-view-details-container").length)&&(jQuery.validator.addMethod("regxEmailValidation",function(e,t){return this.optional(t)||validateEmail(e)},jsLang("Enter a valid email")),$("#sendOrderInfo").validate({rules:{email:{required:!0,regxEmailValidation:!0},subject:{required:!0},message:{required:!0}}}),$("#sendVoiceInfo").validate({rules:{email:{required:!0,regxEmailValidation:!0},subject:{required:!0},message:{required:!0}}}),($(".main-body .page-wrapper").find("#sales-quotation-view-details-container").length||$(".main-body .page-wrapper").find("#sales-invoice-view-details-container").length)&&$("#sendOrderInfoSMS").validate({rules:{phoneno:{required:!0},message:{required:!0}}})),$(document).on("change","#inv-exchange-rate",function(){var e=parseFloat(validateNumbers($("#inv-exchange-rate").val()));""!=global_exchangeRate&&null!=global_exchangeRate&&"undefined"!==global_exchangeRate||(global_exchangeRate=$("#global_exchangeRate").val()),$.each($(".inputPrice"),function(t,n){var i=validateNumbers(n.value)/global_exchangeRate*e;$(n).val(getDecimalNumberFormat(i))}),global_exchangeRate=e,$(".inputPrice").trigger("keyup")}),$(".main-body .page-wrapper").find("#sales-quotation-list-container").length&&($(document).on("click","#csv, #pdf",function(e){e.preventDefault(),window.location=SITE_URL+"/sales_orders_"+this.id+"?to="+$("#endto").val()+"&from="+$("#startfrom").val()+"&location="+$("#location").val()+"&customerId="+$("#customer").val()+"&currency="+$("#currency").val()}),$("#dataTableBuilder").addClass("quotation-list")),$(".main-body .page-wrapper").find("#sales-quotation-add-container").length){var defaultCurrencySymbol=currencySymbol,stack=[],nums=[];setModalFieldsValue(),resetEverything(),triggerAllChanges(),generateAllTotal(),$(".inputPrice").trigger("keyup"),generateSortingNumber(),$(".addRowContainer").hide().last().show(),$("#myModal").on("show.bs.modal",function(){$("#myModal .select2-container--default").not(":first").remove(),$(".js-example-basic-single2").select2({dropdownParent:$("#myModal-body")})}),customerOrSupplierModal("btn_add_customer","add-customer",jsLang("Add Customer")),submitCustomerOrSupplierModal("btn_add_customer","#customerAdd"),$("#btnSubmit").on("click",function(){return checkItemSelected("Please select at least one item to create quotation")}),$("#quotationForm").validate({errorClass:"error display_block",rules:{customer_id:{required:!0},order_date:"required",reference:"required",exchange_rate:{required:!0},"custom_item_name[]":{required:!0},"item_name[]":{required:!0},"item_qty[]":{required:!0},"custom_item_qty[]":{required:!0},"item_price[]":{required:!0},"custom_item_price[]":{required:!0},custom_charge_title:{required:!0}},messages:{order_date:{required:jsLang("Order date required")},reference:{required:jsLang("Reference required")},exchange_rate:{required:jsLang("Required")},"item_name[]":{required:jsLang("Required")},"custom_item_name[]":{required:jsLang("Required")},"item_qty[]":{required:jsLang("Required")},"custom_item_qty[]":{required:jsLang("Required")},"item_price[]":{required:jsLang("Required")},"custom_item_price[]":{required:jsLang("Required")},custom_charge_title:{required:jsLang("Required")}}}),customItem("add","#customers",jsLang("Please select customer first")),customItemValidation("#quotationForm"),hideNoDiv(),referenceNo("QN-",SITE_URL+"/invoice/reference-validation");var refNo="QN-"+$("#reference_no").val();$("#reference_no_write").val(refNo),onChangeLocation(),$("#customers").on("change",function(){onChangeSupplierOrCustomer("#customers")}),$(".select2, .inputDiscountType").select2(),$("#datepicker").daterangepicker(dateSingleConfig()),$(".ref").val(Math.floor(100*Math.random()+1)),$("#search").autocomplete({delay:500,position:{my:"left top",at:"left bottom",collision:"flip"},source:function(e,t){autoCompleteSource(e,t,SITE_URL+"/order/search-item","#customers")},select:function(e,t){var n=t.item;if(n.id){if(in_array(n.id,stack)){var i=$("#itemId-"+n.id).find(".inputQty").val();i++,$("#itemId-"+n.id).find(".inputQty").val(i)}else{autoCompleteSelect("add",n,"#customers");var a=`<tbody id="rowId-${rowNo}">\n\t\t                          \t<input type="hidden" name="item_id[]" value="${n.id}">\n\t\t                          \t<input type="hidden" class="sorting_no" name="sorting_no[]" value="${rowNo}">\n\t\t                          \t<tr class="itemRow rowNo-${rowNo}" id="itemId-${n.id}"  data-row-no="${rowNo}">\n\t\t                              \t<td class="pl-1">\n\t\t                                  \t<input id="item_name_${rowNo}" name="item_name[]" placeholder = "${jsLang("Item Name")}" value="${n.value}" type="text" class="inputDescription form-control">\n\t\t                              \t</td>\n\t\t                              \t<td class="itemHSN">\n\t\t                                  \t<input name="item_hsn[]" class="inputHSN form-control text-center" type="text" placeholder="${jsLang("HSN")} value="${n.hsn}">\n\t\t                              \t</td>\n\t\t                              \t<td class="itemQty">\n\t\t                                  \t<input name="item_qty[]" id="item_qty_${rowNo}" class="inputQty form-control text-center positive-float-number" type="text" value="1">\n\t\t                              \t</td>\n\t\t                              \t<td class="itemPrice">\n\t\t                                  <input id="item_price_${rowNo}" name="item_price[]" value="${getDecimalNumberFormat(n.price)}" class="inputPrice form-control text-center positive-float-number" type="text" placeholder="0.00">\n\t\t                              \t</td>\n\t\t                              \t<td class="itemDiscount">\n\t\t                                \t<input name="item_discount[]" id="item_discount_${rowNo}" class="inputDiscount form-control text-center positive-float-number" type="text" placeholder="0.00">\n\t\t                              \t</td>\n\t\t                              \t<td class="itemDiscount">\n\t\t                                \t<input type="hidden" class="indivisualDiscount" value="0">\n\t\t                                \t<select name="item_discount_type[]" class="inputDiscountType select2 form-control">\n\t\t                                  \t\t<option value="%">&nbsp;% &nbsp;</option>\n\t\t                                  \t\t<option value="$">Flat</option>\n\t\t                                \t</select>\n\t\t                              \t</td>\n\t\t                              \t<td class="itemTax min-width-145">\n\t                              \t\t\t<input  type="hidden" class="indivisualTax" value="0">${taxSelect}\n\t\t                              \t</td>\n\t\t                              \t<td class="itemAmount">\n\t\t                                  <span class="indivisualTotal">0</span>\n\t\t                              \t</td>\n\t\t                              \t<td class="text-center">\n\t                                 \t \t<button type="button" class="closeRow btn btn-xs btn-danger" data-row-id="${rowNo}"><i class="feather icon-trash-2"></i></button>\n\t\t                              \t</td>\n\t\t                          \t</tr>\n\t\t                          \t<tr id="des-row-${rowNo}">\n\t\t                              \t<td colspan="4" class="des-col">\n\t\t                                  \t<textarea name="item_description[]" placeholder="${jsLang("Item Description")}" class="inputItemDescription form-control"></textarea>\n\t\t                              \t</td>\n\t\t                              \t<td colspan="3" class="des-col"></td>\n\t\t                          \t</tr>\n\t\t                      \t</tbody>`;$("#product-table").append(a)}return triggerSomeChanges(),$(".inputTax").trigger("change"),resetEverythingExcept(),onChangeInvType(),generateSortingNumber(),checkStack(rowNo),$(".select2").select2(),this.value="",!1}},minLength:1}),$(".selectpicker").selectpicker(),$(document).on("change",".inputTax",function(e,t,n,i){onChangeTax(".inputTax")}),allTax(".inputTax.form-control",".inputTax"),calculateHiddenTax($(this)),$("#otherDiscountType").trigger("change"),generateAllTotal(),copyAddress(),deleteAttachment(SITE_URL+"/file/remove?type=order"),uploadAttachment(SITE_URL+"/file/upload?type=order","#customers"),$(document).on("click","#btnSubmit",function(){return 0!=checkDiscountAmount()&&(0!=checkIsAvailable("invoice")&&void(1==$("#quotationForm").valid()&&($(".spinner").show(),$(".spinner").css("line-height","0"),$(".spinner").css("display","inline-block"),$("#spinnerText").text(jsLang("Please wait...")),$(this).attr("disabled","disabled"),$("#quotationForm").trigger("submit"))))})}if($(".main-body .page-wrapper").find("#sales-quotation-edit-container").length){var exchange_rate=$("#inv-exchange-rate").val();$(".inv-exchange-rate").append('<input type="hidden" name="global_exchangeRate" id="global_exchangeRate" value="'+exchange_rate+'">'),exchangeRateValue(exchange_rate,"#inv-exchange-rate");stack=[],nums=[];resetEverything(),onChangeInvType(),$("#invItemTax, #invItemDiscount, #invItemDetails, #invItemHSN, #invShipping, #invCustomAmount, #invOtherDiscount, #discount-on, #tax-type").trigger("change"),setModalFieldsValue(),generateAllTotal(),$(".inputPrice").trigger("keyup"),generateSortingNumber(),$(".addRowContainer").hide().last().show(),$("#myModal").on("show.bs.modal",function(){$("#myModal .select2-container--default").not(":first").remove(),$(".js-example-basic-single").select2({dropdownParent:$("#myModal-body")})}),$("#btnSubmit").on("click",function(){return 0!=checkIsAvailable("invoice")&&(0!=checkItemSelected(jsLang("Please select at least one item to create quotation"))&&void 0)}),(currency_id=$("#customers").attr("data-currency_id"))==defaultCurrencyId?($("#exchangeRateBlock").hide(),$("#inv-exchange-rate").val(1)):$("#exchangeRateBlock").css("display","flex"),$("#invoiceForm").validate({rules:{customer_id:{required:!0},order_date:"required",reference:"required","item_name[]":{required:!0},"old_item_name[]":{required:!0},"custom_item_name[]":{required:!0},"item_qty[]":{required:!0},"old_item_qty[]":{required:!0},"custom_item_qty[]":{required:!0},"item_price[]":{required:!0},"old_item_price[]":{required:!0},"custom_item_price[]":{required:!0},exchange_rate:{required:!0}},messages:{order_date:{required:jsLang("Order date required")},reference:{required:jsLang("Reference required")},"old_item_name[]":{required:jsLang("Required")},"item_name[]":{required:jsLang("Required")},"custom_item_name[]":{required:jsLang("Required")},"item_qty[]":{required:jsLang("Required")},"old_item_qty[]":{required:jsLang("Required")},"custom_item_qty[]":{required:jsLang("Required")},"old_item_price[]":{required:jsLang("Required")},"item_price[]":{required:jsLang("Required")},"custom_item_price[]":{required:jsLang("Required")},custom_amount_title:{required:jsLang("Required")}}}),hideNoDiv(),customItem("edit","#customers",jsLang("Please select customer first")),onChangeLocation(),$(".select2").select2(),$(".inputDiscountType").select2(),$("#datepicker").daterangepicker(dateSingleConfig($("#datepicker").val())),$("#search").autocomplete({delay:500,position:{my:"left top",at:"left bottom",collision:"flip"},source:function(e,t){autoCompleteSource(e,t,SITE_URL+"/invoice/item-search","#customers")},select:function(e,t){var n=t.item;if(n.id){if(in_array(n.id,stack)){var i=$("#itemId-"+n.id).find(".inputQty").val();Number.isInteger(parseFloat(i))?$("#itemId-"+n.id).find(".inputQty").val(parseInt(++i)):$("#itemId-"+n.id).find(".inputQty").val(getDecimalNumberFormat(++i))}else{autoCompleteSelect("edit",n,"#customers");var a=`<tbody id="rowId-${rowNo}">\n\t\t                          \t\t<input type="hidden" name="item_id[]" value="${n.id}">\n\t\t                          \t\t<input type="hidden" class="sorting_no" name="sorting_no[]" value="${rowNo}">\n\t\t                          \t\t<tr class="itemRow rowNo-${rowNo}" id="itemId-${n.id} "data-row-no="${rowNo}">\n\t\t                              \t\t<td class="pl-1">\n\t\t                                  \t\t<input id="item_name_${rowNo}" name="item_name[]" placeholder="${jsLang("Item Name")}" value="${n.value}" type="text" class="inputDescription form-control">\n\t\t                              \t\t</td>\n\t\t                              \t\t<td class="itemHSN">\n\t\t                                  \t\t<input name="item_hsn[]" class="inputHSN form-control text-center" type="text" placeholder="${jsLang("HSN")}" value="${n.hsn}">\n\t\t                              \t\t</td>\n\t\t                              \t\t<td class="itemQty">\n\t\t                                  \t\t<input name="item_qty[]" class="inputQty form-control text-center positive-float-number" id="item_qty_${rowNo}" type="text" value="1">\n\t\t                              \t\t</td>\n\t\t\t                              \t<td class="itemPrice">\n\t\t\t                                  \t<input id="item_price_${rowNo}" name="item_price[]" value="${n.price}" class="inputPrice form-control text-center positive-float-number" type="text" placeholder="0.00">\n\t\t\t                              \t</td>\n\t\t\t                              \t<td class="itemDiscount">\n\t\t\t                                  \t<input name="item_discount[]" id="item_discount_${rowNo}" class="inputDiscount form-control text-center positive-float-number" type="text" placeholder="0.00">\n\t\t\t                              \t</td>\n\t\t\t                              \t<td class="itemDiscount">\n\t\t\t                                  \t<input type="hidden" class="indivisualDiscount positive-float-number" value="0">\n\t\t\t                                  \t<select name="item_discount_type[]" class="inputDiscountType form-control js-example-basic-single">\n\t\t\t                                      \t<option value="%">%</option>\n\t\t\t                                      \t<option value="$">${jsLang("Flat")}</option>\n\t\t\t                                  \t</select>\n\t\t\t                              \t</td>\n\t\t\t                              \t<td class="itemTax min-width-145">\n\t\t\t                                  \t<input  type="hidden" class="indivisualTax" value="0">${taxSelect}\n\t\t\t                              \t</td>\n\t\t\t                              \t<td class="itemAmount">\n\t\t\t                                  \t<span class="indivisualTotal">0</span>\n\t\t\t                              \t</td>\n\t\t\t                              \t<td class="text-center">\n\t\t\t                                  \t<button type="button" class="closeRow btn btn-xs btn-danger" data-row-id="${rowNo}"><i class="feather icon-trash-2"></i></button>\n\t\t\t                              \t</td>\n\t\t                          \t\t</tr>\n\t\t                          \t\t<tr id="des-row-${rowNo}">\n\t\t\t                              \t<td colspan="4" class="des-col">\n\t\t\t                                  \t<textarea name="item_description[]" placeholder="${jsLang("Item Description")}" class="inputItemDescription form-control"></textarea>\n\t\t\t                              \t</td>\n\t\t                              \t\t<td colspan="3" class="des-col"></td>\n\t\t                          \t\t</tr>\n\t\t                      \t\t</tbody>`;$("#product-table").append(a)}return $(".inputTax").trigger("change"),triggerSomeChanges(),resetEverythingExcept(),onChangeInvType(),generateSortingNumber(),$(".js-example-basic-single").select2(),checkStack(rowNo),this.value="",!1}},minLength:1}),$(".selectpicker").selectpicker(),$(document).on("changed.bs.select",".selectpicker",function(e,t,n,i){onChangeTax(".selectpicker")}),allTax(".inputTax.form-control.selectpicker",".selectpicker"),deleteAttachment(SITE_URL+"/file/remove?type=order"),uploadAttachment(SITE_URL+"/file/upload?type=order","#customers"),$(".inputQty").trigger("change"),$(document).on("click","#btnSubmit",function(){return 0!=checkDiscountAmount()&&(0!=checkIsAvailable("invoice")&&void 0)})}if($(".main-body .page-wrapper").find("#sales-quotation-view-details-container").length&&(smsModal(phoneNumber),deleteModal(),$("#theModalSubmitBtn").on("click",function(){$("#delete-quotation").trigger("submit")}),document.getElementById("previewTxt").innerHTML=document.getElementById("messageTxt").value,document.getElementById("previewTxt").contentEditable=!0,$("#previewTxt").keyup(function(e){$("#messageTxt").val($("#previewTxt").html())})),$(".main-body .page-wrapper").find("#sales-quotation-convert-invoice-container").length){exchange_rate=$("#inv-exchange-rate").val();$(".inv-exchange-rate").append('<input type="hidden" name="global_exchangeRate" id="global_exchangeRate" value="'+exchange_rate+'">');stack=[],nums=[];resetEverything(),onChangeInvType(),exchangeRateValue(exchange_rate,"#inv-exchange-rate"),$("#invItemTax, #invItemDiscount, #invItemDetails, #invItemHSN, #invShipping, #invCustomAmount, #invOtherDiscount, #discount-on, #tax-type").trigger("change"),setModalFieldsValue(),generateAllTotal(),$(".inputPrice").trigger("keyup"),generateSortingNumber(),$(".addRowContainer").hide().last().show(),$("#myModal").on("show.bs.modal",function(){$("#myModal .select2-container--default").not(":first").remove(),$(".js-example-basic-single").select2({dropdownParent:$("#myModal-body")})}),$("#invoiceForm").validate({rules:{order_date:"required",reference:"required","custom_item_name[]":{required:!0},"item_name[]":{required:!0},"item_qty[]":{required:!0},"custom_item_qty[]":{required:!0},"item_price[]":{required:!0},"custom_item_price[]":{required:!0},inv_exchange_rate:{required:!0},"old_item_name[]":{required:!0},"old_item_qty[]":{required:!0},"old_item_price[]":{required:!0},custom_amount_title:{required:!0}},messages:{order_date:{required:jsLang("Order date required")},reference:{required:jsLang("Order date required")},"old_item_name[]":{required:jsLang("Required")},"item_name[]":{required:jsLang("Required")},"item_qty[]":{required:jsLang("Required")},"item_price[]":{required:jsLang("Required")},"custom_item_name[]":{required:jsLang("Required")},"old_item_qty[]":{required:jsLang("Required")},"custom_item_qty[]":{required:jsLang("Required")},"old_item_price[]":{required:jsLang("Required")},"custom_item_price[]":{required:jsLang("Required")},custom_amount_title:{required:jsLang("Required")}}}),hideNoDiv(),$(document).on("click",".addRow",function(){changeCustomItemText()}),$(".select2, .inputDiscountType").select2(),$("#datepicker").daterangepicker(dateSingleConfig($("#datepicker").val())),$(".ref").val(Math.floor(100*Math.random()+1)),$("#search").autocomplete({source:function(e,t){autoCompleteSource(e,t,SITE_URL+"/invoice/item-search","#customers")},select:function(e,t){var n=t.item;if(n.id){if(1==n.is_stock_managed&&n.available<=0)swal(n.available+jsLang(" item(s) available in stock"),{icon:"error",buttons:[!1,jsLang("Ok")]});else if(in_array(n.id,stack)){var i=$("#itemId-"+n.id).find(".inputQty").val();i=validateNumbers(i),i++,$("#itemId-"+n.id).find(".inputQty").val(getDecimalNumberFormat(i))}else{stack.push(n.id),autoCompleteSelect("add",n,"#customers");var a="";1==n.is_stock_managed&&(a="data-max ="+n.available,n.available);var r=`<tbody id="rowId-${rowNo}">\n\t                          <input type="hidden" name="item_id[]" value="${n.id}">\n\t                          <input type="hidden" class="sorting_no" name="sorting_no[]" value="${rowNo}">\n\t                          <tr class="itemRow rowNo-${rowNo}" id="itemId-${n.id} "data-row-no="${rowNo}">\n\t                            <td class="pl-1">\n\t                              <input id="item_name_${rowNo}" name="item_name[]" placeholder="${jsLang("Item Name")}" value="${n.value}" type="text" class="inputDescription form-control">\n\t                            </td>\n\t                            <td class="itemHSN">\n\t                              <input name="item_hsn[]" class="inputHSN form-control text-center" type="text" placeholder="${jsLang("HSN")}" value="${n.hsn}">\n\t                            </td>\n\t                            <td class="itemQty">\n\t                              <input name="item_qty[]" class="inputQty form-control text-center positive-float-number" id="item_qty_${rowNo}" type="text" value="1" ${a}>\n\t                            </td>\n\t                            <td class="itemPrice">\n\t                              <input id="item_price_${rowNo}" name="item_price[]" value="${getDecimalNumberFormat(n.price)}" class="inputPrice form-control text-center positive-float-number" type="text" placeholder="0.00">\n\t                            </td>\n\t                            <td class="itemDiscount">\n\t                              <input name="item_discount[]" id="item_discount_${rowNo}" class="inputDiscount form-control text-center positive-float-number" type="text" placeholder="0.00">\n\t                            </td>\n\t                            <td class="itemDiscount">\n\t                              <input type="hidden" class="indivisualDiscount" value="0">\n\t                              <select name="item_discount_type[]" class="inputDiscountType form-control js-example-basic-single">\n\t                                  <option value="%">%</option>\n\t                                  <option value="$">Flat</option>\n\t                              </select>\n\t                            </td>\n\t                            <td class="itemTax min-width-145">\n\t                              <input  type="hidden" class="indivisualTax" value="0">${taxSelect}\n\t                            </td>\n\t                            <td class="itemAmount">\n\t                              <span class="indivisualTotal">0</span>\n\t                            </td>\n\t                            <td class="text-center">\n\t                              <button type="button" class="closeRow btn btn-xs btn-danger" data-row-id="${rowNo}"><i class="feather icon-trash-2"></i></button>\n\t                            </td>\n\t                          </tr>\n\t                          <tr id="des-row-${rowNo}">\n\t                            <td colspan="4" class="des-col">\n\t                              <textarea name="item_description[]" placeholder="${jsLang("Item Description")}" class="inputItemDescription form-control"></textarea>\n\t                            </td>\n\t                            <td colspan="3" class="des-col"></td>\n\t                          </tr>\n\t                        </tbody>`;$("#product-table").append(r)}return $(".inputQty").trigger("blur"),triggerSomeChanges(),resetEverythingExcept(),onChangeInvType(),generateSortingNumber(),$(".js-example-basic-single").select2(),checkStack(rowNo),this.value="",!1}},minLength:1}).autocomplete("instance")._renderItem=function(e,t){return showAvailableItem(e,t)},$(".selectpicker").selectpicker(),preQuantity(),showAvavilableStock(),$(document).on("changed.bs.select",".selectpicker",function(e,t,n,i){onChangeTax(".selectpicker")}),allTax(".inputTax.form-control.selectpicker",".selectpicker"),deleteAttachment(SITE_URL+"/file/remove"),uploadAttachment(SITE_URL+"/file/upload","#customers"),(currency_id=$("#customers").attr("data-currency_id"))==defaultCurrencyId?($("#exchangeRateBlock").hide(),$("#inv-exchange-rate").val(1)):$("#exchangeRateBlock").css("display","flex"),$(".inputQty").trigger("change"),$(document).on("click","#btnSubmit",function(){return 0!=checkDiscountAmount()&&(0!=checkIsAvailable("invoice")&&(0!=checkItemSelected(jsLang("Please select at least one item to create invoice"))&&void(1==$("#invoiceForm").valid()&&($(".spinner").show(),$(".spinner").css("line-height","0"),$(".spinner").css("display","inline-block"),$("#spinnerText").text(jsLang("Please wait...")),$(this).attr("disabled","disabled"),$("#invoiceForm").trigger("submit")))))})}if($(".main-body .page-wrapper").find("#sales-invoice-list-container").length&&($(document).on("click","#csv, #pdf",function(e){e.preventDefault(),window.location=SITE_URL+"/sales-list-"+this.id+"?to="+$("#endto").val()+"&from="+$("#startfrom").val()+"&customer="+$("#customer").val()+"&location="+$("#location").val()+"&currency="+$("#currency").val()+"&status="+$("#status").val()}),$("#dataTableBuilder").addClass("invoice-list")),$(".main-body .page-wrapper").find("#sales-invoice-add-container").length){var symbol;stack=[],nums=[];setModalFieldsValue(),resetEverything(),triggerAllChanges(),generateAllTotal(),$(".inputPrice").trigger("keyup"),generateSortingNumber(),$(".addRowContainer").hide().last().show(),$("#myModal").on("show.bs.modal",function(){$("#myModal .select2-container--default").not(":first").remove(),$(".js-example-basic-single2").select2({dropdownParent:$("#myModal-body")})}),customerOrSupplierModal("btn_add_customer","add-customer",jsLang("Add Customer")),submitCustomerOrSupplierModal("btn_add_customer","#customerAdd"),$("#btnSubmit").on("click",function(){return checkItemSelected(jsLang("Please select at least one item to create invoice"))}),$("#invoiceForm").validate({rules:{customer_id:{required:!0},order_date:"required",reference:"required",exchange_rate:{required:!0},"custom_item_name[]":{required:!0},"item_name[]":{required:!0},"item_qty[]":{required:!0},"custom_item_qty[]":{required:!0},"item_price[]":{required:!0},"custom_item_price[]":{required:!0},custom_charge_title:{required:!0}},messages:{order_date:{required:jsLang("Order date required")},reference:{required:jsLang("Reference required")},exchange_rate:{required:jsLang("Required")},"item_name[]":{required:jsLang("Required")},"custom_item_name[]":{required:jsLang("Required")},"item_qty[]":{required:jsLang("Required")},"custom_item_qty[]":{required:jsLang("Required")},"item_price[]":{required:jsLang("Required")},"custom_item_price[]":{required:jsLang("Required")},custom_charge_title:{required:jsLang("Required")}}}),customItem("add","#customers",jsLang("Please select customer first")),customItemValidation("#invoiceForm"),hideNoDiv(),referenceNo("INV-",SITE_URL+"/invoice/reference-validation");refNo="INV-"+$("#reference_no").val();$("#reference_no_write").val(refNo),onChangeLocation(),""!=customer_id&&onChangeSupplierOrCustomer("#customers"),$("#customers").on("change",function(){onChangeSupplierOrCustomer("#customers")}),$(".select2").select2(),$(".inputDiscountType").select2(),$("#datepicker").daterangepicker(dateSingleConfig()),$(".ref").val(Math.floor(100*Math.random()+1)),$("#search").autocomplete({delay:500,position:{my:"left top",at:"left bottom",collision:"flip"},source:function(e,t){autoCompleteSource(e,t,SITE_URL+"/invoice/item-search","#customers")},select:function(e,t){var n=t.item;if(n.id){if(1==n.is_stock_managed&&n.available<=0)swal(n.available+jsLang(" item(s) available in stock"),{icon:"error",buttons:[!1,jsLang("Ok")]});else if(in_array(n.id,stack)){var i=$("#itemId-"+n.id).find(".inputQty").attr("data-max"),a=validateNumbers($("#itemId-"+n.id).find(".inputQty").val());1==n.is_stock_managed&&i<parseFloat(a)+1?swal(i+jsLang(" item(s) available in stock"),{icon:"error",buttons:[!1,jsLang("Ok")]}):Number.isInteger(parseFloat(a))?$("#itemId-"+n.id).find(".inputQty").val(parseInt(++a)):$("#itemId-"+n.id).find(".inputQty").val(getDecimalNumberFormat(++a))}else{if(autoCompleteSelect("add",n,"#customers"),1==n.is_stock_managed)var r="data-max ="+n.available;else r="";var o=`<tbody id="rowId-${rowNo}">\n\t\t                          \t<input type="hidden" name="item_id[]" value="${n.id}">\n\t\t                          \t<input type="hidden" class="sorting_no" name="sorting_no[]" value="${rowNo}">\n\t\t                          \t<tr class="itemRow rowNo-${rowNo}" id="itemId-${n.id}"  data-row-no="${rowNo}">\n\t\t                              \t<td class="pl-1">\n\t\t                                \t<input id="item_name_${rowNo}" name="item_name[]" placeholder="${jsLang("Item Name")}" value="${n.value}" type="text" class="inputDescription form-control">\n\t\t                              \t</td>\n\t\t                              \t<td class="itemHSN">\n\t\t                                \t<input name="item_hsn[]" class="inputHSN form-control text-center"  id="item_hsn_${rowNo}" type="text" placeholder="${jsLang("HSN")}" value="${n.hsn}">\n\t\t                              \t</td>\n\t\t                              \t<td class="itemQty">\n\t\t                                \t<input name="item_qty[]" id="item_qty_${rowNo}" class="inputQty form-control text-center positive-float-number" type="text" value="1" data-is_stock_managed=${n.is_stock_managed} ${r}>\n\t\t                              \t</td>\n\t\t                              \t<td class="itemPrice">\n\t\t                                \t<input id="item_price_${rowNo}" name="item_price[]" value="${getDecimalNumberFormat(n.price)}" class="inputPrice form-control text-center positive-float-number" type="text" placeholder="0.00">\n\t\t                              \t</td>\n\t\t                              \t<td class="itemDiscount">\n\t\t                                \t<input name="item_discount[]" id="item_discount_${rowNo}" class="inputDiscount form-control text-center positive-float-number" type="text" placeholder="0.00">\n\t\t                              \t</td>\n\t\t                              \t<td class="itemDiscount">\n\t\t                                \t<input type="hidden" class="indivisualDiscount" value="0">\n\t\t                                \t<select name="item_discount_type[]" class="inputDiscountType select2 form-control">\n\t\t                                  \t\t<option value="%">&nbsp;% &nbsp;</option>\n\t\t                                  \t\t<option value="$">Flat</option>\n\t\t                                \t</select>\n\t\t                              \t</td>\n\t\t                              \t<td class="itemTax min-width-145">\n\t\t                                \t<input  type="hidden" class="indivisualTax" value="0">${taxSelect}\n\t\t                              \t</td>\n\t\t                              \t<td class="itemAmount">\n\t\t                                \t<span class="indivisualTotal">0</span>\n\t\t                              \t</td>\n\t\t                              \t<td class="text-center">\n\t\t                                \t<button type="button" class="closeRow btn btn-xs btn-danger" data-row-id="${rowNo}"><i class="feather icon-trash-2"></i></button>\n\t\t                              \t</td>\n\t\t                          \t</tr>\n\t\t                          \t<tr id="des-row-${rowNo}">\n\t\t                            \t<td colspan="4" class="des-col">\n\t\t                              \t\t<textarea name="item_description[]" placeholder="${jsLang("Item Description")}"class="inputItemDescription form-control">${null==n.description?"":n.description}</textarea>\n\t\t                            \t</td>\n\t\t                            \t<td colspan="3" class="des-col"></td>\n\t\t                          </tr>\n\t\t                      \t</tbody>`;$("#product-table").append(o)}return resetEverythingExcept(),onChangeInvType(),generateSortingNumber(),triggerSomeChanges(),$(".inputTax").trigger("change"),$(".select2").select2(),checkStack(rowNo,"invoice_add"),this.value="",!1}},minLength:1}).autocomplete("instance")._renderItem=function(e,t){return showAvailableItem(e,t)},$(".selectpicker").selectpicker(),preQuantity(),showAvavilableStock(),$(document).on("change",".inputTax",function(){onChangeTax(".inputTax")}),allTax(".inputTax.form-control",".inputTax"),calculateHiddenTax($(this)),$("#otherDiscountType").trigger("change"),generateAllTotal(),copyAddress(),deleteAttachment(SITE_URL+"/file/remove?type=order"),uploadAttachment(SITE_URL+"/file/upload?type=invoice","#customers"),$(document).on("click","#btnSubmit",function(){return 0!=checkDiscountAmount()&&(0!=checkIsAvailable("invoice")&&void(1==$("#invoiceForm").valid()&&($(".spinner").show(),$(".spinner").css("line-height","0"),$(".spinner").css("display","inline-block"),$("#spinnerText").text(jsLang("Please wait...")),$(this).attr("disabled","disabled"),$("#invoiceForm").trigger("submit"))))})}if($(".main-body .page-wrapper").find("#sales-invoice-edit-container").length){exchange_rate=$("#inv-exchange-rate").val();$(".inv-exchange-rate").append('<input type="hidden" name="global_exchangeRate" id="global_exchangeRate" value="'+exchange_rate+'">'),exchangeRateValue(exchange_rate,"#inv-exchange-rate"),resetEverything(),onChangeInvType(),$("#invItemTax, #invItemDiscount, #invItemDetails, #invItemHSN, #invShipping, #invCustomAmount, #invOtherDiscount, #discount-on, #tax-type").trigger("change"),setModalFieldsValue(),generateAllTotal(),$(".inputPrice").trigger("keyup"),generateSortingNumber(),$(".addRowContainer").hide().last().show(),$("#myModal").on("show.bs.modal",function(){$("#myModal .select2-container--default").not(":first").remove(),$(".js-example-basic-single").select2({dropdownParent:$("#myModal-body")})}),$("#btnSubmit").on("click",function(){return checkItemSelected("Please select at least one item to create invoice")}),$("#invoiceForm").validate({rules:{customer_id:{required:!0},order_date:"required",reference:"required","custom_item_name[]":{required:!0},"old_item_name[]":{required:!0},"item_qty[]":{required:!0},"old_item_qty[]":{required:!0},"custom_item_qty[]":{required:!0},"item_price[]":{required:!0},"old_item_price[]":{required:!0},"custom_item_price[]":{required:!0},exchange_rate:{required:!0},custom_charge_title:{required:!0}},messages:{order_date:{required:jsLang("Order date required")},reference:{required:jsLang("Reference required")},"old_item_name[]":{required:jsLang("Required")},"item_name[]":{required:jsLang("Required")},"custom_item_name[]":{required:jsLang("Required")},"old_item_qty[]":{required:jsLang("Required")},"item_qty[]":{required:jsLang("Required")},"custom_item_qty[]":{required:jsLang("Required")},"old_item_price[]":{required:jsLang("Required")},"item_price[]":{required:jsLang("Required")},"custom_item_price[]":{required:jsLang("Required")},custom_charge_title:{required:jsLang("Required")}}}),hideNoDiv(),customItem("edit","#customers",jsLang("Please select customer first")),onChangeLocation(),$(".select2").select2(),$(".inputDiscountType").select2(),$("#datepicker").daterangepicker(dateSingleConfig($("#datepicker").val())),$("#search").autocomplete({delay:500,position:{my:"left top",at:"left bottom",collision:"flip"},source:function(e,t){autoCompleteSource(e,t,SITE_URL+"/invoice/item-search","#customers")},select:function(e,t){var n=t.item;if(n.id){if(1==n.is_stock_managed&&n.available<=0)swal(n.available+jsLang("item(s) available in stock"),{icon:"error",buttons:[!1,jsLang("Ok")]});else if(in_array(n.id,stack)){var i=$("#itemId-"+n.id).find(".inputQty").attr("data-max"),a=validateNumbers($("#itemId-"+n.id).find(".inputQty").val());1==n.is_stock_managed&&i<parseFloat(a)+1?swal(i+jsLang(" item(s) available in stock"),{icon:"error",buttons:[!1,jsLang("Ok")]}):Number.isInteger(parseFloat(a))?$("#itemId-"+n.id).find(".inputQty").val(parseInt(++a)):$("#itemId-"+n.id).find(".inputQty").val(getDecimalNumberFormat(++a))}else{if(autoCompleteSelect("add",n,"#customers"),1==n.is_stock_managed)var r="data-max ="+n.available;else r="";var o=`<tbody id="rowId-${rowNo}">\n\t\t                          \t<input type="hidden" name="item_id[]" value="${n.id}">\n\t\t                          \t<input type="hidden" class="sorting_no" name="sorting_no[]" value="${rowNo}">\n\t\t                          \t<tr class="itemRow rowNo-${rowNo}" id="itemId-${n.id}" data-row-no="${rowNo}">\n\t\t\t                            <td class="pl-1">\n\t\t\t                              <input id="item_name_${rowNo}" name="item_name[]" placeholder="${jsLang("Item Name")}" value="${n.value}" type="text" class="inputDescription form-control">\n\t\t\t                            </td>\n\t\t\t                            <td class="itemHSN">\n\t\t\t                              <input name="item_hsn[]" class="inputHSN form-control text-center" type="text" placeholder="${jsLang("HSN")}" value="${n.hsn}">\n\t\t\t                            </td>\n\t\t\t                            <td class="itemQty">\n\t\t\t                              <input name="item_qty[]" class="inputQty form-control text-center positive-float-number" id="item_qty_${rowNo}" type="text" value="1" data-is_stock_managed=${n.is_stock_managed} ${r}>\n\t\t\t                            </td>\n\t\t\t                            <td class="itemPrice">\n\t\t\t                              <input id="item_price_${rowNo}" name="item_price[]" value="${n.price}" class="inputPrice form-control text-center positive-float-number" type="text" placeholder="0.00">\n\t\t\t                            </td>\n\t\t\t                            <td class="itemDiscount">\n\t\t\t                              <input name="item_discount[]" id="item_discount_${rowNo}" class="inputDiscount form-control text-center positive-float-number" type="text" placeholder="0.00">\n\t\t\t                            </td>\n\t\t\t                            <td class="itemDiscount">\n\t\t\t                              <input type="hidden" class="indivisualDiscount" value="0">\n\t\t\t                              <select name="item_discount_type[]" class="inputDiscountType form-control js-example-basic-single2">\n\t\t\t                                  <option value="%">%</option>\n\t\t\t                                  <option value="$">Flat</option>\n\t\t\t                              </select>\n\t\t\t                            </td>\n\t\t\t                            <td class="itemTax min-width-145">\n\t\t\t                              <input  type="hidden" class="indivisualTax" value="0">${taxSelect}\n\t\t\t                            </td>\n\t\t\t                            <td class="itemAmount">\n\t\t\t                              <span class="indivisualTotal">0</span>\n\t\t\t                            </td>\n\t\t\t                            <td class="text-center">\n\t\t\t                              <button type="button" class="closeRow btn btn-xs btn-danger" data-row-id="${rowNo}"><i class="feather icon-trash-2"></i></button>\n\t\t\t                            </td>\n\t\t                          \t</tr>\n\t\t                          \t<tr id="des-row-${rowNo}">\n\t\t\t                            <td colspan="4" class="des-col">\n\t\t\t                              <textarea name="item_description[]" placeholder="${jsLang("Item Description")}" class="inputItemDescription form-control"></textarea>\n\t\t\t                            </td>\n\t\t                            \t<td colspan="3" class="des-col"></td>\n\t\t                          \t</tr>\n\t\t                        </tbody>`;$("#product-table").append(o)}return $(".inputTax").trigger("change"),resetEverythingExcept(),onChangeInvType(),generateSortingNumber(),triggerSomeChanges(),$(".js-example-basic-single2").select2(),checkStack(rowNo),this.value="",!1}},minLength:1}).autocomplete("instance")._renderItem=function(e,t){return showAvailableItem(e,t)},$(".selectpicker").selectpicker(),preQuantity(),showAvavilableStock(),(currency_id=$("#customers").attr("data-currency_id"))==defaultCurrencyId?($("#exchangeRateBlock").hide(),$("#inv-exchange-rate").val(1)):$("#exchangeRateBlock").css("display","flex"),$(document).on("changed.bs.select",".selectpicker",function(e,t,n,i){onChangeTax(".selectpicker")}),allTax(".inputTax.form-control.selectpicker",".selectpicker"),deleteAttachment(SITE_URL+"/file/remove"),uploadAttachment(SITE_URL+"/file/upload?type=order","#customers"),$(".inputQty").trigger("change"),$(document).on("click","#btnSubmit",function(){return 0!=checkDiscountAmount()&&(0!=checkIsAvailable("invoice")&&void 0)})}if($(".main-body .page-wrapper").find("#sales-invoice-view-details-container").length){$(".spinner").css("display","none");var amountBill=0,exhangeRateBill=0;$("#payModal").on("hidden.bs.modal",function(){$("#account_div").css("display","none"),payModal()}),$("#payModal").on("show.bs.modal",function(){$("#account_div").css("display","none"),$("#currency").val(invoiceCurrency).trigger("change")}),$(".js-example-basic").select2({dropdownParent:$("#payModal")}),$("#payment_date").daterangepicker(dateSingleConfig()),$("#payForm").validate({rules:{amount:{required:!0},exchange_rate:{required:!0},incoming_amount:{required:!0},payment_date:{required:!0}},submitHandler:function(){payFormAjaxCall()}}),smsModal(phoneNo),deleteModal(),$("#theModalSubmitBtn").on("click",function(){$("#delete-invoice").trigger("submit")}),$("#account_currency_div").css("display","none"),$(document).on("change","#payment_method",function(){$("#account_currency_div").css("display","none"),onChangePaymentMethod("sales")}),$("#currency").on("change",function(){onChangeCurrency(Number(dflt_currency_id),Number($("#currency").val()))}),$(document).on("keyup","#amount, #exchange_rate",function(){onKeyUpAmountExchangeRate()}),$("#account_no").on("change",function(){onChangeAccountNo("invoice")}),uploadAttachment(SITE_URL+"/file/upload?type=payment","#customers"),deleteAttachment(SITE_URL+"/file/remove?type=order"),amountBill=$("#amount").val(),exhangeRateBill=$("#exchange_rate").val(),$("#amount").val(getDecimalNumberFormat(amountBill)),$("#exchange_rate").val(getDecimalNumberFormat(exhangeRateBill)),statusChangePayment(),document.getElementById("previewTxt").innerHTML=document.getElementById("messageTxt").value,document.getElementById("previewTxt").contentEditable=!0,$("#previewTxt").keyup(function(e){$("#messageTxt").val($("#previewTxt").html())})}if($(".main-body .page-wrapper").find("#sales-invoice-copy-container").length){exchange_rate=$("#inv-exchange-rate").val();$(".inv-exchange-rate").append('<input type="hidden" name="global_exchangeRate" id="global_exchangeRate" value="'+exchange_rate+'">'),exchangeRateValue(exchange_rate,"#inv-exchange-rate");var currency_id;nums=[];resetEverything(),onChangeInvType(),$("#invItemTax, #invItemDiscount, #invItemDetails, #invItemHSN, #invShipping, #invCustomAmount, #invDiscount, #discount-on, #tax-type").trigger("change"),$(".inputQty").trigger("keyup"),setModalFieldsValue(),generateAllTotal(),$(".inputPrice").trigger("keyup"),generateSortingNumber(),$(".addRowContainer").hide().last().show(),$("#myModal").on("show.bs.modal",function(){$("#myModal .select2-container--default").not(":first").remove(),$(".js-example-basic-single").select2({dropdownParent:$("#myModal-body")})}),$("#invoiceForm").validate({rules:{customer_id:{required:!0},order_date:"required",reference:"required","custom_item_name[]":{required:!0},"item_name[]":{required:!0},"item_qty[]":{required:!0},"custom_item_qty[]":{required:!0},"item_price[]":{required:!0},"custom_item_price[]":{required:!0},exchange_rate:{required:!0}},messages:{order_date:{required:jsLang("Order date required")},reference:{required:jsLang("Reference required")},"item_name[]":{required:jsLang("Required")},"custom_item_name[]":{required:jsLang("Required")},"item_qty[]":{required:jsLang("Required")},"custom_item_qty[]":{required:jsLang("Required")},"item_price[]":{required:jsLang("Required")},"custom_item_price[]":{required:jsLang("Required")},custom_amount_title:{required:jsLang("Required")}}}),hideNoDiv(),customItem("edit","#customers",jsLang("Please select customer first")),$(".select2").select2(),$(".inputDiscountType").select2(),$("#datepicker").daterangepicker(dateSingleConfig()),$(".ref").val(Math.floor(100*Math.random()+1)),$("#search").autocomplete({delay:500,position:{my:"left top",at:"left bottom",collision:"flip"},source:function(e,t){autoCompleteSource(e,t,SITE_URL+"/invoice/item-search","#customers")},select:function(e,t){var n=t.item;if(n.id){if(1==n.is_stock_managed&&n.available<=0)swal(n.available+jsLang(" item(s) available in stock"),{icon:"error",buttons:[!1,jsLang("Ok")]});else if(in_array(n.id,stack)){var i=$("#itemId-"+n.id).find(".inputQty").attr("data-max"),a=validateNumbers($("#itemId-"+n.id).find(".inputQty").val());1==n.is_stock_managed&&i<parseFloat(a)+1?swal(n.available+jsLang(" item(s) available in stock"),{icon:"error",buttons:[!1,jsLang("Ok")]}):Number.isInteger(parseFloat(a))?$("#itemId-"+n.id).find(".inputQty").val(parseInt(++a)):$("#itemId-"+n.id).find(".inputQty").val(getDecimalNumberFormat(++a))}else{autoCompleteSelect("edit",n,"#customers");var r="";1==n.manage_stock_level&&(r="max ="+n.available);var o=`<tbody id="rowId-${rowNo}">\n\t\t                          \t<input type="hidden" name="row_counter[]" value="${rowNo}">\n\t\t                          \t<input type="hidden" name="item_id[]" value="${n.id}">\n\t\t                          \t<input type="hidden" class="sorting_no" name="sorting_no[]" value="${rowNo}">\n\t\t                          \t<tr class="itemRow rowNo-${rowNo}" id="itemId-${n.id}" data-row-no="${rowNo}">\n\t\t\t                            <td class="pl-1">\n\t\t                              \t\t<input id="item_name_${rowNo}" name="item_name[]" placeholder="${jsLang("Item Name")}" value="${n.value}" type="text" class="inputDescription form-control">\n\t\t\t                            </td>\n\t\t\t                            <td class="itemHSN">\n\t\t\t                              \t<input name="item_hsn[]" class="inputHSN form-control text-center" type="text" placeholder="${jsLang("HSN")}" value="${n.hsn}">\n\t\t\t                            </td>\n\t\t\t                            <td class="itemQty">\n\t\t\t                              \t<input name="item_qty[]" class="inputQty form-control text-center positive-float-number" id="item_qty_${rowNo}" type="text" value="1" data-is_stock_managed=${n.is_stock_managed} ${r}>\n\t\t\t                            </td>\n\t\t\t                            <td class="itemPrice">\n\t\t\t                              \t<input id="item_price_${rowNo}" name="item_price[]" value="${n.price}" class="inputPrice form-control text-center positive-float-number" type="text" placeholder="0.00">\n\t\t\t                            </td>\n\t\t\t                            <td class="itemDiscount">\n\t\t\t                              \t<input name="item_discount[]" id="item_discount_${rowNo}" class="inputDiscount form-control text-center positive-float-number" type="text" placeholder="0.00">\n\t\t\t                            </td>\n\t\t\t                            <td class="itemDiscount">\n\t\t\t                              \t<input type="hidden" class="indivisualDiscount" value="0">\n\t\t\t                              \t<select name="item_discount_type[]" class="inputDiscountType form-control js-example-basic-single">\n\t\t\t                                  \t<option value="%">%</option>\n\t\t\t                                  \t<option value="$">Flat</option>\n\t\t\t                              \t</select>\n\t\t\t                            </td>\n\t\t\t                            <td class="itemTax min-width-145">\n\t\t\t                              \t<input  type="hidden" class="indivisualTax" value="0">${taxSelect}\n\t\t\t                            </td>\n\t\t\t                            <td class="itemAmount">\n\t\t\t                              \t<span class="indivisualTotal">0</span>\n\t\t\t                            </td>\n\t\t\t                            <td class="text-center">\n\t\t\t                              \t<button type="button" class="closeRow btn btn-xs btn-danger" data-row-id="${rowNo}"><i class="feather icon-trash-2"></i></button>\n\t\t\t                            </td>\n\t\t                          \t</tr>\n\t\t                          \t<tr id="des-row-${rowNo}">\n\t\t                            \t<td colspan="4" class="des-col">\n\t\t                              \t\t<textarea name="item_description[]" placeholder="${jsLang("Item Description")}" class="inputItemDescription form-control"></textarea>\n\t\t                            \t</td>\n\t\t                            \t<td colspan="3" class="des-col"></td>\n\t\t                          \t</tr>\n\t\t                        \t</tbody>`;$("#product-table").append(o)}return $(".inputQty").trigger("keyup"),triggerSomeChanges(),resetEverythingExcept(),onChangeInvType(),generateSortingNumber(),$(".js-example-basic-single").select2(),checkStack(rowNo),this.value="",!1}},minLength:1}).autocomplete("instance")._renderItem=function(e,t){return showAvailableItem(e,t)},$(".selectpicker").selectpicker(),preQuantity(),showAvavilableStock(),$(document).on("changed.bs.select",".selectpicker",function(e,t,n,i){onChangeTax(".selectpicker")}),allTax(".inputTax.form-control.selectpicker",".selectpicker"),deleteAttachment(SITE_URL+"/file/remove?type=order"),uploadAttachment(SITE_URL+"/file/upload?type=order","#customers"),(currency_id=$("#customers").attr("data-currency_id"))==defaultCurrencyId?($("#exchangeRateBlock").hide(),$("#inv-exchange-rate").val(1)):$("#exchangeRateBlock").css("display","flex"),$(".inputQty").trigger("change"),$(document).on("click","#btnSubmit",function(){return 0!=checkDiscountAmount()&&(0!=checkIsAvailable("invoice")&&(0!=checkItemSelected(jsLang("Please select at least one item to create invoice"))&&void(1==$("#invoiceForm").valid()&&($(".spinner").show(),$(".spinner").css("line-height","0"),$(".spinner").css("display","inline-block"),$("#spinnerText").text(jsLang("Please wait...")),$(this).attr("disabled","disabled"),$("#invoiceForm").trigger("submit")))))})}$(".main-body .page-wrapper").find("#sales-payment-list-container").length&&($(document).on("click","#csv, #pdf",function(e){e.preventDefault(),window.location=SITE_URL+"/payment/customer-"+this.id+"?to="+$("#endto").val()+"&from="+$("#startfrom").val()+"&customer="+$("#customer").val()+"&method="+$("#method").val()+"&currency="+$("#currency").val()+"&currency="+$("#currency").val()}),statusChangePayment(),$("#dataTableBuilder").addClass("sales-payment-list")),$(".main-body .page-wrapper").find("#sales-edit-payment-container").length&&($("#payment_date").attr("readonly","readonly"),deleteAttachment(SITE_URL+"/file/remove?type=order"),uploadAttachment(SITE_URL+"/file/upload?type=order","#customers"),$(window).on("load",function(){$(window).width()<650&&($(".col-sm-2").addClass("col-sm-3"),$(".col-sm-3").removeClass("col-sm-2"),$(".col-sm-7").addClass("col-sm-8"),$(".col-sm-8").removeClass("col-sm-7"))})),$(".main-body .page-wrapper").find("#sales-payment-view-details-container").length&&(ClassicEditor.create(document.querySelector(".editor")),jQuery.validator.addMethod("regxEmailValidation",function(e,t){return this.optional(t)||validateEmail(e)},jsLang("Enter a valid email")),$("#sendPaymentReceipt").validate({rules:{email:{required:!0,regxEmailValidation:!0},subject:{required:!0},message:{required:!0}}}),$(document).on("click",".status",function(){var e=$(this).attr("data-id"),t=$(this).data("trans_id"),n=JSON.stringify(t),i=SITE_URL+"/payment/customer_payment/verification";$.ajax({url:i,method:"POST",data:{status:e,customer_transaction_id:n,_token:token},dataType:"json",success:function(e){1==e.status?location.reload():swal(jsLang("Something went wrong, please try again."),{icon:"error",buttons:[!1,jsLang("Ok")]})}})}),deleteModal(),$("#theModalSubmitBtn").on("click",function(){$("#delete-payment").trigger("submit")}),document.getElementById("previewTxt").innerHTML=document.getElementById("messageTxt").value,document.getElementById("previewTxt").contentEditable=!0,$("#previewTxt").keyup(function(e){$("#messageTxt").val($("#previewTxt").html())}));

"use strict";if($(".main-body .page-wrapper").find("#customer-panel-details-container").length&&($(window).on("load",function(){$(window).width()<576&&($("#border-right-1").removeClass("border-right"),$("div.card-block.m-t-10").addClass("ml-2"))}),$(".progressbar").each(function(){$(this).offset().top,$(window).scrollTop();var e=$(this).find(".circle").attr("data-percent");parseInt(e,10),parseInt(100,10),$(this).data("animate");$(this).data("animate",!0),$(this).find(".circle").circleProgress({startAngle:-Math.PI/2,value:e/100,thickness:14,fill:{color:"#1dc4e8"}}).on("circle-animation-progress",function(e,t,a){$(this).find("div").text((100*a).toFixed(1)+"%")}).stop()}),$("#show_more").on("click",function(e){"SHOW MORE"===$(this).text()?($(this).text(jsLang("SHOW LESS")),$("#projectDetailsLess").hide()):($(this).text(jsLang("SHOW MORE")),$("#projectDetailsLess").show())}),$(window).width()>=320&&$(window).width()<=425?($(".progressbar").addClass("center"),$(".resDate").remove("f-16").addClass("f-14")):$(window).width()>=1440?($(".progressbar").remove("center").addClass("float-right"),$(".resDate").remove("f-14").addClass("f-16")):($(".progressbar").remove("center"),$(".resDate").remove("f-14").addClass("f-16"))),$(".main-body .page-wrapper").find("#cus-panel-project-list-container").length&&($(document).on("click","#csv, #pdf",function(e){e.preventDefault(),window.location=SITE_URL+"/customer-panel/projects-"+this.id+"?to="+$("#endto").val()+"&from="+$("#startfrom").val()+"&customer="+$("#customer").val()+"&status="+$("#status").val()}),$("#dataTableBuilder").addClass("customer-panel-project-list-styles")),$(".main-body .page-wrapper").find("#cus-panel-ticket-add-container").length&&($(".select2").select2(),$("body").on("click",".delete_file_field",function(){$(this).parents(".control-group").remove()}),validateCKEditor("#ticket_messages","#ticket_messages-error"),$("#ticket_form").validate({ignore:[],rules:{subject:{required:!0},department_id:{required:!0},message:{CKEditorRequired:!0}}}),$(document).ready(function(){$("select").on("change",function(){""!=$(this).val()&&$(this).valid()})}),deleteAttachment(SITE_URL+"/customer-panel/file/remove?type=ticket_reply"),uploadAttachment(SITE_URL+"/customer-panel/file/upload?type=ticket_reply","#customer_id"),$("#btnSubmit").on("click",function(){1==$("#ticket_form").valid()&&($(".spinner").show(),$(".spinner").css("line-height","0"),$("#spinnerText").text(jsLang("Please wait...")),$(this).attr("disabled",!0),$("#ticket_form").trigger("submit"))})),$(".main-body .page-wrapper").find("#cus-panel-ticket-reply-container").length){var editorValue,stack=[];hideNoDiv(),$(".select2").select2(),validateCKEditor("#ticket_messages","#ticket_messages-error"),ClassicEditor.create(document.querySelector("#txtMessage")).then(e=>{editorValue=e,theEditor=intialData=e.getData(),e.model.document.on("change",()=>{let t=intialData=e.getData();if(t=t.replace(/&nbsp;/g,"").replace("<p>","").replace("</p>","").replace(/^\s+|\s+$/g,""),theEditor=t,0==t.length)return $("#txtMessage-error").show().html(jsLang("This field is required.")),!1;$("#txtMessage-error").hide().html("")})}).catch(e=>{}),$(".edit-btn").on("click",function(){editorValue.setData($(this).attr("data-message")),$("#reply_id").val($(this).attr("data-id"))}),$("#replyModal").validate({rules:{message:{CKEditorRequired:!0}},submitHandler:function(){return"<p>Â </p>"==$("#txtMessage").text()?($("#txtMessage-error").show().html(jsLang("This field is required.")),!1):($("#txtMessage-error").hide(),!0)}}),$("#reply_form").validate({ignore:[],rules:{message:{CKEditorRequired:!0}},submitHandler:function(){return $(".spinner").show(),$(".spinner").css("line-height","0"),$("#spinnerText").text(jsLang("Please wait...")),$("#btnSubmit").attr("disabled",!0),!0}}),$("body").on("click",".delete_file_field",function(){$(this).parents(".control-group").remove()}),deleteAttachment(SITE_URL+"/customer-panel/file/remove"),uploadAttachment(SITE_URL+"/customer-panel/file/upload?type=ticket_reply","#customer_id"),$(document).ready(function(){$(window).width()<=320?$(".card-header h5").css("width","54%"):$(window).width()>=375&&$(window).width()<=425&&$(".card-header h5").css("width","44%")})}if($(".main-body .page-wrapper").find("#cus-panel-ticket-list-container").length&&($(document).on("click","#csv, #pdf",function(e){e.preventDefault(),window.location=SITE_URL+"/customer-ticket-filtering-"+this.id+"?to="+$("#endto").val()+"&from="+$("#startfrom").val()+"&customer="+customerName+"&customerID="+customerID+"&project="+$("#project").val()+"&status="+$("#status").val()+"&department_id="+$("#department_id").val()}),$("#dataTableBuilder").addClass("customer-panel-support"),$(document).on("click",".ticket_status_change",function(){var e=$(this).attr("data-id"),t=$(this).attr("ticket_id");ticketStatusChange(SITE_URL+"/customer-panel/ticket/change-status",e,t)})),$(".main-body .page-wrapper").find("#cus-panel-invoice-list-container").length&&($(document).ready(function(){$(document).on("click","#csv, #pdf",function(e){e.preventDefault(),window.location=SITE_URL+"/customer-panel/sales-report-"+this.id+"?to="+$("#endto").val()+"&from="+$("#startfrom").val()+"&customer="+$("#customer").val()+"&pay_status_type="+$("#pay_status_type").val()})}),$("#dataTableBuilder").addClass("customer-panel-quotation")),$(".main-body .page-wrapper").find("#cus-panel-payment-container").length&&($(document).ready(function(){$(document).on("click","#csv, #pdf",function(e){e.preventDefault(),window.location=SITE_URL+"/customer-panel/payment/customer-"+this.id+"?to="+$("#endto").val()+"&from="+$("#startfrom").val()+"&customer="+customerID+"&method="+$("#method").val()})}),$("#dataTableBuilder").addClass("customer-panel-payment")),$(".main-body .page-wrapper").find("#cus-panel-sale-order-container").length&&($(document).on("click","#csv, #pdf",function(e){e.preventDefault(),window.location=SITE_URL+"/customer-panel-quotation-filtering-"+this.id+"?to="+$("#endto").val()+"&from="+$("#startfrom").val()+"&customer="+customerName+"&debtor_no="+customerID}),$("#dataTableBuilder").addClass("customer-panel-quotation")),$(".main-body .page-wrapper").find("#cus-panel-profile-container").length&&($(".select2").select2(),$("#password-form").validate({rules:{password:{required:!0,minlength:5},password_confirmation:{required:!0,minlength:5,equalTo:'[name="password"]'}}}),$("#user-form").validate({rules:{first_name:{required:!0,regxForName:!0},last_name:{required:!0,regxForName:!0},phone:{required:!1,regxPhone:!0}}}),jQuery.extend(jQuery.validator.messages,{equalTo:jsLang("Password did not match")}),jQuery.validator.addMethod("regxForName",function(e,t){var a=new RegExp(/^[a-zA-Z-'\s]+[a-zA-Z-'\.?\s]+$/);return this.optional(t)||a.test(e)},jsLang("Enter a valid name")),jQuery.validator.addMethod("regxPhone",function(e,t){var a=new RegExp(/^((\+\d{1,4}(-| )?\(?\d\)?(-| )?\d{1,9})|(\(?\d{2,9}\)?))(-| )?(\d{3,4})(-| )?(\d{4})(( x| ext)\d{1,5}){0,1}$/),r=new RegExp(/^[+0-9 () \-]{8,20}$/);return this.optional(t)||a.test(e)||r.test(e)},jsLang("Enter a valid phone number"))),$(".main-body .page-wrapper").find("#cus-viewinvoice-container").length){$("#notifications .noti-alert").addClass("px-3"),$("#stripe").on("show.bs.modal",function(){cardNumber.clear(),cardExpiry.clear(),cardCvc.clear(),$(".error-alert").css("display","none")});var stripe=Stripe(publishableKey),elements=stripe.elements(),elementStyles={base:{color:"#32325D",fontWeight:500,fontFamily:"Source Code Pro, Consolas, Menlo, monospace",fontSize:"16px",fontSmoothing:"antialiased","::placeholder":{color:"#cfd7df"},":-webkit-autofill":{color:"#e39f48"}},invalid:{color:"#721c24","::placeholder":{color:"#cfd7df"}}},elementClasses={focus:"focused",empty:"empty",invalid:"invalid"},cardNumber=elements.create("cardNumber",{style:elementStyles,classes:elementClasses});cardNumber.mount("#card-number");var cardExpiry=elements.create("cardExpiry",{style:elementStyles,classes:elementClasses});cardExpiry.mount("#card-expiry");var cardCvc=elements.create("cardCvc",{style:elementStyles,classes:elementClasses});function stripeTokenHandler(e){var t=document.getElementById("payment-form"),a=document.createElement("input");a.setAttribute("type","hidden"),a.setAttribute("name","stripeToken"),a.setAttribute("value",e.id),t.appendChild(a),$("#payment-form").trigger("submit")}function createToken(){stripe.createToken(cardNumber).then(function(e){e.error?($("#card-errors").css("display","block"),document.getElementById("card-errors").textContent=e.error.message):($("#stripe-submit-btn").attr("disabled",!0),$(".fa-spin").addClass("show-spin"),stripeTokenHandler(e.token))})}cardCvc.mount("#card-cvc");var form=document.getElementById("payment-form");form.addEventListener("submit",function(e){e.preventDefault(),createToken()}),cardNumber.on("change",function(e){var t=document.getElementById("card-errors");e.error?($(".fa-spin").hide(),$("#card-errors").css("display","block"),t.textContent=e.error.message):($("#card-errors").css("display","none"),t.textContent="")});var paymentMethodName="";$(".js-example-basic").select2({dropdownParent:$("#payModal")}),$("#payment_date").daterangepicker(dateSingleConfig()),$("#payModal").on("hidden.bs.modal",function(){$("#payForm").validate().resetForm(),$("#payment_date").removeClass("error")}),$("#payForm").validate({rules:{payment_date:{required:!0}}}),$(document).on("click","#pay-button",function(){1==$("#payForm").valid()&&($(this).attr("disabled","disabled"),$("#payForm").trigger("submit"))}),$("#sendOrderInfo").validate({rules:{email:{required:!0},subject:{required:!0},message:{required:!0}}}),$("#sendOrderInfoSMS").validate({rules:{phoneno:{required:!0},message:{required:!0}}}),uploadAttachment(SITE_URL+"/customer-panel/file/upload?type=payment","#customer_id"),deleteAttachment(SITE_URL+"/customer-panel/file/remove")}

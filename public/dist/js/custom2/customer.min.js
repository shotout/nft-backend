"use strict";if($(".main-body .page-wrapper").find("#add-customer-container").length){function emailValidation(){var e,t=SITE_URL+"/email-valid-customer",a=$("#email").val(),n=$("#token").val();return validateEmail(a)&&($("#val_email").html(""),$.ajax({url:t,data:{_token:n,email:a},type:"POST",success:function(t){"true"!=t?($("#val_email").css("display","block").text(jsLang("This email is already existed.")),$("#submitBtn").on("click",function(e){e.preventDefault()}),e=0):($("#val_email").html(""),$("#submitBtn").off("click"),e=1)},error:function(e,t,a){return 0}})),e}$(document).ready(function(){$(".js-example-basic-single").select2(),$(".error").hide(),$("#submitBtn").on("click",function(e){var t=$("#first_name").val(),a=$("#last_name").val(),n=$("#currency_id").val();""!=t&&""!=a&&""!=n||($("#home").addClass("active show"),$('[href="#home"]').tab("show").addClass("active"),$("#profile").removeClass("active show"),$("#home").attr("aria-labelledby").val("home-tab"),e.preventDefault()),1==$("#customerAdd").valid()&&""!=n&&($(".spinner").show().css("line-height","0"),$("#spinnerText").text(jsLang("Please wait...")),$(this).attr("disabled",!0),$("#customerAdd").trigger("submit"))}),$("#copy").on("click",function(){$("#ship_street").val($("#bill_street").val()),$("#ship_city").val($("#bill_city").val()),$("#ship_state").val($("#bill_state").val()),$("#ship_zipCode").val($("#bill_zipCode").val());var e=$("#bill_country_id").val();$("#ship_country_id").val(e).trigger("change")})}),$("#currency_id").on("change",function(){""==$(this).val()?$("#error-currency").show():$("#error-currency").hide()}),$("#customerAdd").validate({rules:{first_name:{required:!0,maxlength:30},last_name:{required:!0,maxlength:30},email:{regxEmailValidation:!0},phone:{required:!1,regxPhone:!0},currency_id:{required:!0}}}),$(document).ready(function(){$("#email").on("blur",function(){$("#val_email").html(""),""!=$(this).val()?emailValidation():$("#submitBtn").off("click")})}),$("#email").on("keyup",function(){null==$("#email-error").val()&&$("#val_email").html("")})}if($(".main-body .page-wrapper").find("#edit-customer-container").length){function emailValidation(){var e,t=$("input[name=customer_id]").val(),a=SITE_URL+"/email-valid-customer",n=$("#email").val(),i=$("#token").val();return validateEmail(n)?($("#val_email").html(""),$.ajax({url:a,data:{_token:i,email:n,customerId:t},type:"POST",success:function(t){"true"!=t?($("#val_email").css("display","block").text(jsLang("This email is already existed.")),$("#submitBtn").on("click",function(e){e.preventDefault()}),e=0):($("#val_email").html(""),$("#submitBtn").off("click"),e=1)},error:function(e,t,a){return 0}}),e):0}$(document).ready(function(){$(".js-example-basic-single").select2(),$("#curr_err, #ship_country_err").hide()}),$("#copy").on("click",function(){$("#ship_street").val($("#bill_street").val()),$("#ship_city").val($("#bill_city").val()),$("#ship_state").val($("#bill_state").val()),$("#ship_zipCode").val($("#bill_zipCode").val());var e=$("#billing_country_id").val();$("#shipping_country_id").val(e).trigger("change")}),$("#editCustomer").validate({rules:{first_name:{required:!0,maxlength:30},last_name:{required:!0,maxlength:30},email:{regxEmailValidation:!0},currency_id:{required:!0}}}),$(document).ready(function(){$("#email").on("blur",function(){$("#val_email").html(""),""!=$(this).val()?emailValidation():$("#submitBtn").off("click")})}),$("#email").on("keyup",function(){null==$("#email-error").val()&&$("#val_email").html("")}),$("#password-form").validate({rules:{password:{required:!0,minlength:5},password_confirmation:{required:!0,minlength:5,equalTo:"#password"}}}),$("#currency").on("change",function(){""==$(this).val()?$("#error-currency").show():$("#error-currency").hide()}),$("#submitBtn").on("click",function(){1==$("form#editCustomer").valid()&&($("#submitBtn").attr("disabled","disabled"),$("form#editCustomer").trigger("submit"))})}$(".main-body .page-wrapper").find("#add-customer-container,#edit-customer-container").length&&(jQuery.validator.addMethod("regxPhone",function(e,t){var a=new RegExp(/^((\+\d{1,4}(-| )?\(?\d\)?(-| )?\d{1,9})|(\(?\d{2,9}\)?))(-| )?(\d{3,4})(-| )?(\d{4})(( x| ext)\d{1,5}){0,1}$/),n=new RegExp(/^[+0-9 () \-]{8,20}$/);return this.optional(t)||a.test(e)||n.test(e)},jsLang("Enter a valid phone number")),jQuery.validator.addMethod("regxEmailValidation",function(e,t){return this.optional(t)||validateEmail(e)},jsLang("Enter a valid email"))),$(".main-body .page-wrapper").find("#import-customer-container").length&&($("#myform1").validate({rules:{csv_file:{required:!0}}}),$("#myform1").on("submit",function(e){var t=0;$(".valdation_check").each(function(){var e=$(this).attr("id");""==$("#"+e).val()&&($("#val_"+e).html(jsLang("This field is required.")),t=1)}),$(".valdation_select").each(function(){var e=$(this).attr("id");""==$("#"+e).val()&&($("#val_"+e).html(jsLang("This field is required.")),t=1)}),1==t&&e.preventDefault()}),$(".valdation_check").on("keypress keyup",function(){var e=$(this).attr("id");$("#val_"+e).html("")}),$(".valdation_select").on("click",function(){var e=$(this).attr("id");$("#val_"+e).html("")}),$("#fileRequest").on("click",function(){window.location=SITE_URL+"/dist/downloads/dosen_sheet.csv"}),$(document).ready(function(){$(".error").hide(),$("#note_txt_2").hide(),$("#validatedCustomFile").on("change",function(){for(var e=[],t=0;t<$(this)[0].files.length;t++)e.push($(this)[0].files[t].name);$(this).next(".custom-file-label").html(e.join(", "));var a=e.toString().split(".").pop();-1==$.inArray(a,["csv"])?($("#note_txt_1, #validatedCustomFile-error").hide(),$("#note_txt_2").show(),$("#note_txt_2").html('<h6> <span class="text-danger font-weight-bolder"> '+jsLang("Invalid file Extension.")+' </span> </h6> <span class="badge badge-info note-style">'+jsLang("Note")+'</span><small class="text-info">'+jsLang(" Allowed File Extensions: csv")),$("#submit").attr("disabled","disabled")):($("#submit").removeAttr("disabled"),$("#note_txt_1").hide(),$("#note_txt_2").hide())})})),$("#validatedCustomFile").on("change",function(e){for(var t=[],a=0;a<$(this)[0].files.length;a++)t.push($(this)[0].files[a].name);$(this).next(".custom-file-label").html(t.join(", "))}),$("#validatedCustomFile").on("change",function(){$(this).next(".custom-file-label").html($(this)[0].files[0].name)}),$("#validatedCustomFile1").on("change",function(e){for(var t=[],a=0;a<$(this)[0].files.length;a++)t.push($(this)[0].files[a].name);$(this).next(".custom-file-label").html(t.join(", "))}),$("#validatedCustomFile2").on("change",function(e){for(var t=[],a=0;a<$(this)[0].files.length;a++)t.push($(this)[0].files[a].name);$(this).next(".custom-file-label").html(t.join(", "))}),$("#validatedCustomFile3").on("change",function(e){for(var t=[],a=0;a<$(this)[0].files.length;a++)t.push($(this)[0].files[a].name);$(this).next(".custom-file-label").html(t.join(", "))}),$("#validatedCustomFile4").on("change",function(e){for(var t=[],a=0;a<$(this)[0].files.length;a++)t.push($(this)[0].files[a].name);$(this).next(".custom-file-label").html(t.join(", "))}),$("#validatedCustomFile5").on("change",function(e){for(var t=[],a=0;a<$(this)[0].files.length;a++)t.push($(this)[0].files[a].name);$(this).next(".custom-file-label").html(t.join(", "))}),$("#validatedCustomFile6").on("change",function(e){for(var t=[],a=0;a<$(this)[0].files.length;a++)t.push($(this)[0].files[a].name);$(this).next(".custom-file-label").html(t.join(", "))}),$(".main-body .page-wrapper").find("#customer-invoice-container").length&&($(document).ready(function(){$(".select2").select2()}),$(function(){$("#daterange-btn").daterangepicker(daterangeConfig(startDate,endDate),cbRange),cbRange(startDate,endDate),$(document).on("click","#csv, #pdf",function(e){e.preventDefault(),window.location=SITE_URL+"/customer/sales-report-"+this.id+"?to="+$("#endto").val()+"&from="+$("#startfrom").val()+"&customer="+$("#customer").val()+"&pay_status_type="+$("#pay_status_type").val()}),$(document).ready(function(){$("#confirmDelete").on("show.bs.modal",function(e){var t=$(e.relatedTarget),a=$(this);$("#confirmDeleteSubmitBtn").attr("data-task","").removeClass("delete-task-btn"),"Delete"==t.data("label")&&(a.find("#confirmDeleteSubmitBtn").addClass("delete-task-btn").attr("data-task",t.data("id")).text(jsLang("Delete")).show(),a.find("#confirmDeleteLabel").text(t.data("title")),a.find(".modal-body").text(t.data("message"))),$("#confirmDeleteSubmitBtn").on("click",function(){$("#delete-invoice-"+$(this).data("task")).trigger("submit")})})}),$(document).on("click","#tablereload",function(e){e.preventDefault(),$("#dataTableBuilder").DataTable().ajax.reload()})})),$(".main-body .page-wrapper").find("#customer-ledger-container").length&&($(document).ready(function(){$("#dataTableBuilder_length").after('<div class="col-md-4 col-sm-4 col-xs-6"><div class="row" id="mt-2"><div class="btn-group btn-styles"><button type="button" class="form-control dropdown-toggle export-btn" data-toggle="dropdown" aria-haspopup="true">Export</button><ul class="dropdown-menu csv-btn"><li><a href="" title="CSV" id="csv">'+jsLang("CSV")+'</a></li><li><a href="" title="PDF" id="pdf">'+jsLang("PDF")+'</a></li></ul></div><div class="btn btn-group refresh-btn"><a href="" id="tablereload" class="form-control"><span><i class="fa fa-refresh"></i></span></a></div></div></div>')}),$(document).ready(function(){var e=$("#total_purchase_amount").val(),t=$("#paid_amount").val(),a=$("#balance_amount").val();$("#total_purchase_amount1").html(e),$("#paid_amount1").html(t),$("#balance_amount1").html(a)}),$(function(){$("#ledger").DataTable({order:[],language:{url:app_locale_url},pageLength:row_per_page}),$("#summery").DataTable({order:[],columnDefs:[{targets:0,orderable:!1},{targets:1,orderable:!1}],language:{url:app_locale_url},pageLength:row_per_page}),$("#summery_paginate").hide(),$("#summery_info").hide(),$("#summery_length").hide(),$("#summery_filter").hide()}),$("#daterange-btn").daterangepicker(daterangeConfig(startDate,endDate),cbRange),cbRange(startDate,endDate),$(document).on("click","#csv, #pdf",function(e){e.preventDefault(),window.location=SITE_URL+"/customer-ledger-filtering-"+this.id+"?to="+$("#endto").val()+"&from="+$("#startfrom").val()+"&id="+ledger_customer_id})),$(".main-body .page-wrapper").find("#customer-note-container").length&&($("#daterange-btn").daterangepicker(daterangeConfig(startDate,endDate),cbRange),cbRange(startDate,endDate),$("#dataTableBuilder").on("click",".notecontent",function(){var e=$(this).attr("data-subject"),t=$(this).attr("data-note"),a=$(this).attr("data-note_id");$("#edit_subject").val(e),$("#edit_note").val(t),$("#note_id").val(a)}),$("#add_note, #edit_note_form").validate({rules:{subject:{required:!0},note:{required:!0}}}),$("#edit_note_form").validate({rules:{subject:{required:!0},note:{required:!0}}}),$("#submitBtn").on("click",function(){1==$("#add_note").valid()&&($(".spinner").show().css("line-height","0"),$("#spinnerText").text(jsLang("Please wait...")),$(this).attr("disabled",!0),$("#add_note").trigger("submit"))}),$("#newNote").on("hidden.bs.modal",function(){$("#subject-error").hide("error"),$("input[name=subject]").removeClass("error"),$("#note-error").hide("error"),$("input[name=note]").removeClass("error")}),$("#editNote").on("hidden.bs.modal",function(){$("#edit_subject-error").hide("error"),$("input[name=subject]").removeClass("error"),$("#edit_note-error").hide("error"),$("input[name=note]").removeClass("error")}),$(document).on("click","#csv, #pdf",function(e){e.preventDefault(),window.location=SITE_URL+"/customer/notes-"+this.id+"?to="+$("#endto").val()+"&from="+$("#startfrom").val()+"&customerId="+$("#customer").val()}),$(document).ready(function(){$("#confirmDelete").on("show.bs.modal",function(e){var t=$(e.relatedTarget),a=$(this);$("#confirmDeleteSubmitBtn").attr("data-task","").removeClass("delete-task-btn"),"Delete"==t.data("label")&&(a.find("#confirmDeleteSubmitBtn").addClass("delete-task-btn").attr("data-task",t.data("id")).text(jsLang("Delete")).show(),a.find("#confirmDeleteLabel").text(t.data("title")),a.find(".modal-body").text(t.data("message"))),$("#confirmDeleteSubmitBtn").on("click",function(){$("#delete-notes-"+$(this).data("task")).trigger("submit")})})}),$(document).on("click","#edit-customer-note",function(){var e=$("#edit-customer-note").attr("data-note_id");$.ajax({url:SITE_URL+"/customer/getnote",method:"GET",data:{noteId:e,_token:token},dataType:"json",success:function(e){$("#edit_subject").val(e.subject),$("#edit_note").val(e.content)}})})),$(".main-body .page-wrapper").find("#cus-panel-container").length&&$(document).ready(function(){320!=$(window).width()&&768!=$(window).width()||($("h2").removeClass("f-22").addClass("f-18"),$(".dashBoardIcon").removeClass("f-60").addClass("f-40"))}),$(".main-body .page-wrapper").find("#customer-payments-container").length&&($(function(){$("#example1").DataTable({order:[],columnDefs:[{targets:5,orderable:!1}],language:{url:app_locale_url},pageLength:row_per_page}),$(".select2").select2(),$("#daterange-btn").daterangepicker(daterangeConfig(startDate,endDate),cbRange),cbRange(startDate,endDate),$(document).on("click","#csv, #pdf",function(e){e.preventDefault(),window.location=SITE_URL+"/customer/payment-report-"+this.id+"?to="+$("#endto").val()+"&from="+$("#startfrom").val()+"&customerId="+$("#customer").val()+"&method="+$("#method").val()+"&currency="+$("#currency").val()}),$(document).on("click","#tablereload",function(e){e.preventDefault(),$("#dataTableBuilder").DataTable().ajax.reload()}),$(document).ready(function(){$("#confirmDelete").on("show.bs.modal",function(e){var t=$(e.relatedTarget),a=$(this);$("#confirmDeleteSubmitBtn").attr("data-task","").removeClass("delete-task-btn"),"Delete"==t.data("label")&&(a.find("#confirmDeleteLabel").text(t.data("title")),a.find(".modal-body").text(t.data("message"))),$("#confirmDeleteSubmitBtn").on("click",function(){$("#delete-payment-"+t.data("id")).trigger("submit")})})})}),$("#dataTableBuilder").addClass("customer-payments-list")),$(".main-body .page-wrapper").find("#customer-project-container").length&&($(function(){$(".select2").select2(),$("#daterange-btn").daterangepicker(daterangeConfig(startDate,endDate),cbRange),cbRange(startDate,endDate),$(document).on("click","#csv, #pdf",function(e){e.preventDefault(),window.location=SITE_URL+"/customer/projects-"+this.id+"?to="+$("#endto").val()+"&from="+$("#startfrom").val()+"&customer="+$("#customer").val()+"&status="+$("#status").val()}),$(document).on("click","#tablereload",function(e){e.preventDefault(),$("#dataTableBuilder").DataTable().ajax.reload()})}),$(document).ready(function(){$("#confirmDelete").on("show.bs.modal",function(e){var t=$(e.relatedTarget),a=$(this);$("#confirmDeleteSubmitBtn").attr("data-task","").removeClass("delete-task-btn"),"Delete"==t.data("label")&&(a.find("#confirmDeleteSubmitBtn").addClass("delete-task-btn").attr("data-task",t.data("id")).text(jsLang("Delete")).show(),a.find("#confirmDeleteLabel").text(t.data("title")),a.find(".modal-body").text(t.data("message"))),$("#confirmDeleteSubmitBtn").on("click",function(){$("#delete-project-"+$(this).data("task")).trigger("submit")})})}),$("#dataTableBuilder").addClass("customer-project-list")),$(".main-body .page-wrapper").find("#customer-sale-order-container").length&&($("#daterange-btn").daterangepicker(daterangeConfig(startDate,endDate),cbRange),cbRange(startDate,endDate),$(document).ready(function(){$("#confirmDelete").on("show.bs.modal",function(e){var t=$(e.relatedTarget),a=$(this);$("#confirmDeleteSubmitBtn").attr("data-task","").removeClass("delete-task-btn"),"Delete"==t.data("label")&&(a.find("#confirmDeleteSubmitBtn").addClass("delete-task-btn").attr("data-task",t.data("id")).text(jsLang("Delete")).show(),a.find("#confirmDeleteLabel").text(t.data("title")),a.find(".modal-body").text(t.data("message"))),$("#confirmDeleteSubmitBtn").on("click",function(){$("#delete-quotation-"+t.data("id")).trigger("submit")})})}),$(document).on("click","#csv, #pdf",function(e){e.preventDefault(),window.location=SITE_URL+"/customer-quotation-filtering-"+this.id+"?to="+$("#endto").val()+"&from="+$("#startfrom").val()+"&customer="+sale_order_cus_name+"&debtor_no="+sale_order_cus_id}),$(document).on("click","#tablereload",function(e){e.preventDefault(),$("#dataTableBuilder").DataTable().ajax.reload()})),$(".main-body .page-wrapper").find("#customer-task-container").length&&($(".select2").select2(),$("#daterange-btn").daterangepicker(daterangeConfig(startDate,endDate),cbRange),cbRange(startDate,endDate),$(document).on("click","#csv, #pdf",function(e){e.preventDefault(),window.location=SITE_URL+"/customer/tasks-"+this.id+"?to="+$("#endto").val()+"&from="+$("#startfrom").val()+"&customer="+$("#customer").val()+"&assignee="+$("#assignee").val()+"&status="+$("#status").val()+"&priority="+$("#priority").val()}),$(document).on("click","#tablereload",function(e){e.preventDefault(),$("#dataTableBuilder").DataTable().ajax.reload()}),$(document).ready(function(){$("#confirmDelete").on("show.bs.modal",function(e){var t=$(e.relatedTarget),a=$(this);$("#confirmDeleteSubmitBtn").attr("data-task","").removeClass("delete-task-btn"),"Delete"==t.data("label")&&(a.find("#confirmDeleteSubmitBtn").addClass("btn btn-danger custom-btn-small delete-task-btn").attr("data-task",t.data("id")).text(jsLang("Delete")).show(),a.find("#confirmDeleteLabel").text(t.data("title")),a.find(".modal-body").text(t.data("message"))),$("#confirmDeleteSubmitBtn").on("click",function(){$("#delete-task-"+$(this).data("task")).trigger("submit")})})}),$("body").tooltip({selector:'[data-toggle="tooltip"]'}),$("#dataTableBuilder").addClass("customer-task-list")),$(".main-body .page-wrapper").find("#customer-ticket-container").length&&($(function(){$(".select2").select2(),$("#example1").DataTable({order:[],columnDefs:[{targets:5,orderable:!1}],language:{url:app_locale_url},pageLength:row_per_page}),$("#daterange-btn").daterangepicker(daterangeConfig(startDate,endDate),cbRange),cbRange(startDate,endDate),$(document).on("click","#csv, #pdf",function(e){e.preventDefault(),window.location=SITE_URL+"/customer/tickets-"+this.id+"?to="+$("#endto").val()+"&from="+$("#startfrom").val()+"&customer="+$("#customer").val()+"&project="+$("#project").val()+"&department_id="+$("#department_id").val()+"&status="+$("#status").val()}),$(document).on("click","#tablereload",function(e){e.preventDefault(),$("#dataTableBuilder").DataTable().ajax.reload()})}),$(document).ready(function(){$("#confirmDelete").on("show.bs.modal",function(e){var t=$(e.relatedTarget),a=$(this);$("#confirmDeleteSubmitBtn").attr("data-task","").removeClass("delete-task-btn"),"Delete"==t.data("label")&&(a.find("#confirmDeleteSubmitBtn").addClass("btn-danger custom-btn-small delete-task-btn").attr("data-task",t.data("id")).text(jsLang("Delete")).show(),a.find("#confirmDeleteLabel").text(t.data("title")),a.find(".modal-body").text(t.data("message"))),$("#confirmDeleteSubmitBtn").on("click",function(){$("#delete-ticket-"+$(this).data("task")).trigger("submit")})})}),$("#dataTableBuilder").addClass("customer-ticket-list"),$(document).on("click",".ticket_status_change",function(){var e=$(this).attr("data-id"),t=$(this).attr("ticket_id");ticketStatusChange(SITE_URL+"/ticket/change-status",e,t)}),$(document).on("click",".ticket_priority_change",function(){var e=$(this).attr("data-id"),t=$(this).attr("ticket_id");ticketPriorityChange(SITE_URL+"/ticket/priority-status",e,t)}),$(".main-body .page-wrapper").find(".list-container").length&&($(document).ready(function(){$("#dataTableBuilder").on("change",".status",function(){var e=$(this).attr("data-admin_id"),t=$(this).is(":checked")?1:0,a=SITE_URL+"/admin/change-status";$.ajax({url:a,method:"POST",data:{id:e,status:t,_token:token},dataType:"json",success:function(e){"success"==e.status?($("#total_admin").html(e.total_admin),$("#admin_active").html(e.admin_active),$("#admin_inactive").html(e.admin_inactive)):$("#alert").fadeTo(2e3,500).slideUp(500,function(){$("#alert").slideUp(500)})}})}),$(document).on("click","#csv, #pdf",function(e){e.preventDefault(),window.location=SITE_URL+"/customer_list_"+this.id})}),$("body").tooltip({selector:'[data-toggle="tooltip"]'}),$("#dataTableBuilder").addClass("customer-list-styles")));